{"dependencies":[{"name":"E:\\dev\\Snake\\tsconfig.json","includedInParent":true,"mtime":1518205817291},{"name":"./core","loc":{"line":4,"column":19}},{"name":"./vec2","loc":{"line":5,"column":19}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"./core\"),t=require(\"./core\"),n=require(\"./vec2\"),a=100,r=20,i=20,s=4,o=e.Dir.Right,c=1,f=1;function l(e){var t=e.getContext(\"2d\"),n=u();window.addEventListener(\"keydown\",function(e){return G(n,e.keyCode)}),g(t,n),P(t,n)}function u(){return{game:t.init({gridSize:[r,i],dir:o,snakeLength:s,position:[c,f]}),needsRender:!0}}function d(e){t.reinit(e.game),e.needsRender=!0}function g(t,n){var a=n.game,r=performance.now();switch(n.needsRender&&(a.state===e.GameState.InProgress&&S(t,a,r),n.needsRender=!1),h(t,a,r),a.state){case e.GameState.InProgress:break;case e.GameState.InProgressAndPaused:w(t,a);break;case e.GameState.Lost:p(t,a);break;case e.GameState.Won:x(t,a)}requestAnimationFrame(function(){return g(t,n)})}function S(e,t,n){var a=m(e.canvas,t),r=a[0],i=a[1];e.fillStyle=\"rgb(0, 0, 0)\",e.fillRect(0,0,e.canvas.width,e.canvas.height);for(var s=t.gridSize,o=s[0],c=s[1],f=0;f<o;f++)for(var l=0;l<c;l++){if(t.grid[f][l]==t.snake.length)e.fillStyle=\"rgb(255, 255, 255)\";else{if(!(t.grid[f][l]>0))continue;var u=t.grid[f][l]/t.snake.length;e.fillStyle=v(u)}e.fillRect(f*r,l*i,r,i)}}function m(e,t){return n.divide([e.width,e.height],t.gridSize)}function b(e,t,n){return t+Math.floor(e*(n-t))}function v(e){return\"rgb(\"+b(e,150,200)+\",\"+b(e,150,255)+\",\"+b(e,140,100)+\")\"}function h(e,t,n){var a=t.noms,r=a[0],i=a[1],s=m(e.canvas,t),o=s[0],c=s[1];e.fillStyle=k(n),e.fillRect(r*o,i*c,o,c)}function R(e){return Math.floor(255.999999*e)}function k(e){var t=e%100/100;return\"rgb(255,\"+R(e%200/200)+\",\"+R(t)+\")\"}function w(e,t){e.fillStyle=\"rgb(240, 20, 20)\",e.font=\"40px Roboto\",e.fillText(\"Paused\",300,200)}function p(e,n){e.fillStyle=\"rgb(255, 0, 0)\",e.font=\"40px Roboto\",e.fillText(\"You died\",300,200),e.font=\"34px Roboto\",e.fillText(\"Score: \"+t.getScore(n),320,400)}function x(e,t){e.fillStyle=\"rgb(255, 0, 0)\",e.font=\"40px Roboto\",e.fillText(\"Wtf.\",300,200),e.font=\"34px Roboto\",e.fillText(\"You won?\",320,400)}function P(n,r){setInterval(function(){var n=r.game;switch(n.state){case e.GameState.InProgress:t.update(n),r.needsRender=!0}},a)}function G(t,n){switch(t.game.state){case e.GameState.InProgress:D(t,n);break;case e.GameState.InProgressAndPaused:I(t,n);break;case e.GameState.Lost:case e.GameState.Won:y(t,n)}}function y(e,t){switch(t){case 13:case 27:case 32:d(e)}}function D(n,a){var r=n.game;switch(a){case 13:case 27:case 32:r.state=e.GameState.InProgressAndPaused,n.needsRender=!0;break;case 65:case 37:t.setDirection(r,e.Dir.Left);break;case 87:case 38:t.setDirection(r,e.Dir.Up);break;case 68:case 39:t.setDirection(r,e.Dir.Right);break;case 83:case 40:t.setDirection(r,e.Dir.Down)}}function I(t,n){var a=t.game;switch(console.log(\"unpausing\",n),n){case 13:case 27:case 32:a.state=e.GameState.InProgress}}exports.start=l;"},"hash":"f614a6ada2997ebb2a7806089c129303","cacheData":{"env":{}}}