!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=46)}([function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return a});var r=n(11);function s(e,t){const n=Object(r.d)(t,e);return(e,t,s=null)=>Object(r.c)(n,t,s,e)}const o=e=>s(e,2),i=e=>s(e,514);function c(e,t){const n=Object(r.d)(16644,{c:e,e:t});return e=>Object(r.e)(n,e)}function a(e,t){const n=Object(r.d)(4,{c:e,e:t});return e=>Object(r.e)(n,e)}},function(e,t,n){"use strict";var r,s,o,i={};n.r(i),n.d(i,"create",function(){return d}),n.d(i,"map",function(){return b}),n.d(i,"filter",function(){return p});class c{constructor(e,t){this.x=e,this.y=t}eq(e){return c.eq(this,e)}add(e){return new c(this.x+e.x,this.y+e.y)}addScalar(e){return new c(this.x+e,this.y+e)}addScalars(e,t){return new c(this.x+e,this.y+t)}subtract(e){return new c(this.x-e.x,this.y-e.y)}subtractScalar(e){return new c(this.x-e,this.y-e)}subtractScalars(e,t){return new c(this.x-e,this.y-t)}multiply(e){return new c(this.x*e.x,this.y*e.y)}multiplyScalar(e){return new c(this.x*e,this.y*e)}multiplyScalars(e,t){return new c(this.x*e,this.y*t)}divide(e){return new c(this.x/e.x,this.y/e.y)}divideScalar(e){return new c(this.x/e,this.y/e)}toString(){return"Vec2("+this.x+", "+this.y+")"}}c.zeroes=new c(0,0),function(e){e.eq=function(e,t){return e.x===t.x&&e.y===t.y},e.lerp=function(t,n,r){return new e(n.x+(r.x-n.x)*t,n.y+(r.y-n.y)*t)},e.distance=function(e,t){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}}(c||(c={})),function(e){e.create=function(e){const{effectsHandler:t,initialState:n,initialEphemeral:r,forceRender:s,update:o}=e;let i=n,c=r;return{send:function(e){const[n,r,a]=o(i,c,e);i!==n&&(s(),i=n),t(a),c=r},getState:()=>i}}}(r||(r={})),function(e){function t(e){return{isOk:!0,value:e}}function n(){return{isOk:!1,value:null}}e.ok=t,e.err=n,e.bool=function(e){return"boolean"==typeof e?t(e):{isOk:!1,value:null}},e.int=function(e){return"number"==typeof e&&Number.isInteger(e)?t(e):{isOk:!1,value:null}},e.number=function(e){return"number"==typeof e?t(e):{isOk:!1,value:null}},e.string=function(e){return"string"==typeof e?t(e):{isOk:!1,value:null}},e.nullable=function(e){return n=>(function(e,n){return null===n?t(null):e(n)})(e,n)},e.maybe=function(e){return n=>(function(e,n){return void 0===n?t(void 0):e(n)})(e,n)},e.array=function(e){return n=>(function(e,n){if("object"!=typeof n||!Array.isArray(n))return{isOk:!1,value:null};const r=[];for(let t=0;t<n.length;t++){const s=e(n[t]);if(!s.isOk)return{isOk:!1,value:null};r.push(s.value)}return t(r)})(e,n)},e.object=function(e){return n=>(function(e,n){if("object"!=typeof n)return{isOk:!1,value:null};const r={};for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t](n[t]);if(!s.isOk)return{isOk:!1,value:null};r[t]=s.value}return t(r)})(e,n)},e.dictionary=function(e){return n=>(function(e,n){if("object"!=typeof n)return{isOk:!1,value:null};const r=n,s=Object.keys(r),o={};for(let t=0;t<s.length;t++){const n=s[t],i=e(r[n]);if(!i.isOk)return{isOk:!1,value:null};o[n]=i.value}return t(o)})(e,n)},e.tuple2=function(e,n){return r=>(function(e,n,r){if("object"!=typeof r||!Array.isArray(r)||r.length<2)return{isOk:!1,value:null};const s=e(r[0]);if(!s.isOk)return{isOk:!1,value:null};const o=n(r[1]);return o.isOk?t([s.value,o.value]):{isOk:!1,value:null}})(e,n,r)},e.tuple3=function(e,n,r){return s=>(function(e,n,r,s){if("object"!=typeof s||!Array.isArray(s)||s.length<3)return{isOk:!1,value:null};const o=e(s[0]);if(!o.isOk)return{isOk:!1,value:null};const i=n(s[1]);if(!i.isOk)return{isOk:!1,value:null};const c=r(s[2]);return c.isOk?t([o.value,i.value,c.value]):{isOk:!1,value:null}})(e,n,r,s)},e.oneOf=function(e){return t=>(function(e,t){for(let n=0;n<e.length;n++){const r=e[n](t);if(r.isOk)return r}return{isOk:!1,value:null}})(e,t)},e.map=function(e,n){return r=>(function(e,n,r){const s=e(r);return s.isOk?t(n(s.value)):{isOk:!1,value:null}})(e,n,r)},e.filter=function(e,t){return n=>(function(e,t,n){const r=e(n);return r.isOk?t(r.value)?r:{isOk:!1,value:null}:r})(e,t,n)},e.extend=function(e,t){return n=>(function(e,t,n){const r=e(n);return r.isOk?t(r.value):{isOk:!1,value:null}})(e,t,n)},e.lazy=function(e){return t=>e()(t)},e.createJsonDecoder=function(e){return t=>(function(e,t){try{return e(JSON.parse(t))}catch(e){return{isOk:!1,value:null}}})(e,t)},e.decodeValue=function(e,t){return e(t)}}(s||(s={})),function(e){e.of=function(e){return null==e?[]:[e]},e.withDefault=function(e,t){return 0===e.length?t:e[0]},e.withDefaultf=function(e,t){return 0===e.length?t():e[0]},e.map=function(e,t){return 0===e.length?[]:[t(e[0])]},e.map2=function(e,t,n){return 0===e.length||0===t.length?[]:[n(e[0],t[0])]},e.map3=function(e,t,n,r){return 0===e.length||0===t.length||0===n.length?[]:[r(e[0],t[0],n[0])]},e.andThen=function(e,t){return 0===e.length?[]:t(e[0])}}(o||(o={}));class a{constructor(){this.value=null,this.error=null}}class u extends a{constructor(e){super(),this.value=e}isOk(){return!0}isErr(){return!1}map(e){return new u(e(this.value))}mapError(e){return new u(this.value)}andThen(e){return e(this.value)}}class l extends a{constructor(e){super(),this.error=e}isOk(){return!1}isErr(){return!0}map(e){return new l(this.error)}mapError(e){return new l(e(this.error))}andThen(e){return new l(this.error)}}class f{constructor(e,t,n){this.x=e,this.y=t,this.z=n}eq(e){return f.eq(this,e)}}!function(e){e.eq=function(e,t){return e.x===t.x&&e.y===t.y&&e.y===t.y},e.lerp=function(t,n,r){return new e(n.x+(r.x-n.x)*t,n.y+(r.y-n.y)*t,n.z+(r.z-n.z)*t)}}(f||(f={}));class h{constructor(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}eq(e){return h.eq(this,e)}}function d(e){return new v(e)}function b(e,t){return new m(e,t)}function p(e,t,n){return new y(e,t,n)}!function(e){e.fromRgba=function(t,n){return new e(t.r*n,t.g*n,t.b*n,n)},e.eq=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}}(h||(h={}));class v{constructor(e){this.handlers=[],this.currentValue=e,this.signal=new g(this)}push(e){this.currentValue=e;const t=this.handlers;for(let n=0;n<t.length;n++)t[n](e)}value(){return this.currentValue}subscribe(e){return this.handlers.push(e),{dispose:()=>{!function(e,t){let n=-1;for(let r=0;r<e.length;r++)if(e[r]===t){n=r;break}-1!==n&&e.splice(n,1)}(this.handlers,e)}}}}class g{constructor(e){this.baseSignal=e}value(){return this.baseSignal.value()}subscribe(e){return this.baseSignal.subscribe(e)}}class m{constructor(e,t){this.baseSignal=e,this.transform=t}value(){return this.transform(this.baseSignal.value())}subscribe(e){return this.baseSignal.subscribe(t=>{e(this.transform(t))})}}class y{constructor(e,t,n){this.baseSignal=e,this.filter=n;const r=e.value();this.currentValue=n(r)?r:t}value(){return this.currentValue}subscribe(e){const t=this.filter;return this.baseSignal.subscribe(n=>{t(n)&&(this.currentValue=n,e(n))})}}const T={make:e=>{let t=!1;window.painterStop=()=>t=!0;let n=requestAnimationFrame(function r(){if(!t){try{e(performance.now())}catch(e){}n=requestAnimationFrame(r)}});return()=>cancelAnimationFrame(n)}};class _{constructor(e){this.maxSamples=e.maxSamples,this.onSamples=e.onSamples,this.samples=new Array(e.maxSamples),this.nextIdx=0,this.startTimeMs=null}start(){this.startTimeMs,this.startTimeMs=performance.now()}end(){this.startTimeMs;const e=performance.now(),t=this.startTimeMs;this.startTimeMs=null,this.samples[this.nextIdx++]={startMs:t,endMs:e},this.nextIdx===this.maxSamples&&(this.onSamples(this.samples),this.samples=new Array(this.maxSamples),this.nextIdx=0)}}n.d(t,"f",function(){return w}),n.d(t,"s",function(){return x}),n.d(t,"q",function(){return O}),n.d(t,"r",function(){return R}),n.d(t,"n",function(){return I}),n.d(t,"p",function(){return E}),n.d(t,"m",function(){return A}),n.d(t,"k",function(){return j}),n.d(t,"l",function(){return S}),n.d(t,"a",function(){return L}),n.d(t,"o",function(){return M}),n.d(t,"t",function(){return k}),n.d(t,"h",function(){return r}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"i",function(){return c}),n.d(t,"j",function(){return h}),n.d(t,"g",function(){return i}),n.d(t,"c",function(){return T}),n.d(t,"e",function(){return _});class w{constructor(){this.__value=null}set(e){if(null!==this.__value)throw"Attempted to re-set a SetOnce";this.__value=e}get value(){if(null===this.__value)throw"Attempted to get the value of a SetOnce before it was set";return this.__value}}function x(e,t){return void 0!==e?e:t}function O(e,t,n,r){const s=n-e,o=r-t;return Math.sqrt(s*s+o*o)}function R(e,t,n){return t+(n-t)*e}function I(e,t,n){return n<e?e:n>t?t:n}function E(e){return new Promise(t=>{setTimeout(t,e)})}function A(e,t,n){const r=e.slice();return r.splice(t,1,n),r}function j(e,t,n){const r=e.slice();return r.splice(t,0,n),r}function S(e,t){const n=e.slice();return n.splice(t,1),n}var L;function M(e){switch(e){case L.Hsv:return"Hsv";case L.Hsluv:return"Hsluv"}}function k(e,t,n){const r=360*e*(Math.PI/180),s=Math.cos(r)*(n.x-t.x)-Math.sin(r)*(n.y-t.y)+t.x,o=Math.sin(r)*(n.x-t.x)+Math.cos(r)*(n.y-t.y)+t.y;return new c(s,o)}!function(e){e[e.Hsv=0]="Hsv",e[e.Hsluv=1]="Hsluv"}(L||(L={}))},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return b}),n.d(t,"e",function(){return p}),n.d(t,"g",function(){return v}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return m}),n.d(t,"k",function(){return y}),n.d(t,"j",function(){return T}),n.d(t,"f",function(){return _});var r=n(14),s=n(17),o=n(41),i=n(0);const c={v:"",u:l};function a(e,t){Object(r.a)(`value="${Object(s.a)(t)}"`)}function u(e,t){Object(r.b)(Object(s.b)(t))}function l(e,t,n,r){void 0===n?""!==r&&(e.value=r):void 0!==r&&e.value!==r&&(e.value=r)}const f=t=>"ssr"===e.env.IVI_TARGET?""===t?o.a:{v:t,s:a}:""===t?c:{v:t,u:l},h="ssr"===e.env.IVI_TARGET?e=>""===e?o.a:{v:e,s:u}:f,d=Object(i.c)("button"),b=Object(i.c)("canvas"),p=Object(i.c)("div"),v=Object(i.c)("li"),g=Object(i.c)("p"),m=Object(i.c)("span"),y=Object(i.c)("ul"),T=Object(i.b)("textarea",2050),_=Object(i.b)("input",4098)}).call(this,n(19))},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"brush24px",function(){return Z}),n.d(r,"brush48px",function(){return $}),n.d(r,"edit24px",function(){return K}),n.d(r,"edit48px",function(){return J}),n.d(r,"search24px",function(){return Q}),n.d(r,"search48px",function(){return ee});var s=n(11),o=n(47),i=n(2),c=n(28);function a({onClick:e,title:t,content:n}){return Object(s.a)(Object(o.c)(e),Object(i.c)(c.primary,{title:t},n))}function u({onClick:e,title:t,content:n}){return Object(s.a)(Object(o.c)(e),Object(i.c)(c.ddefault,{title:t},n))}function l(){}function f(e){const t=e.isDown?c.sinkableSunk:c.sinkableUnsunk,n=e.isDown?e.onDownClick||l:e.onClick;return Object(s.a)(Object(o.c)(n),Object(i.c)(t,{title:e.title},e.children))}var h=n(0),d=n(54),b=n(34);const p=Object(h.d)(e=>Object(s.a)(Object(o.c)(e.onClick),Object(i.e)(b.container,void 0,[Object(i.i)(b.secondary,{style:{"background-color":e.colorSecondary.toStyle()}}),Object(i.i)(b.primary,{style:{"background-color":e.color.toStyle()}})])),d.a);var v,g=n(48),m=n(50),y=n(10),T=n(23),_=n(51),w=n(8),x=n(35),O=n(5),R=n(4),I=n(1);!function(e){e[e.Default=0]="Default",e[e.DownOnInner=1]="DownOnInner",e[e.DownOnOuter=2]="DownOnOuter"}(v||(v={}));const E=(1-.55)/2;function A(){}const j=Object(h.a)(e=>{const t=Object(g.a)(null),n=Object(g.a)(null);let r=null,c=v.Default,a=new O.Hsluv(0,0,0),u=I.a.Hsluv,l=A;function f(n){const r=Object(m.a)(t).getBoundingClientRect(),s=n.clientX-r.left-.5*r.width,o=n.clientY-r.top-.5*r.height,i=Math.atan2(o,s)/(2*Math.PI)+.5;switch(u){case I.a.Hsv:{const e=O.rgbToHsv(a.toRgb());l(O.rgbToHsluv(e.with({h:i}).toRgb()));break}case I.a.Hsluv:l(a.with({h:360*i}))}Object(y.b)(e)}function h(n){const r=Object(m.a)(t).getBoundingClientRect(),s=r.width*E,o=r.height*E,i=r.width-2*s,c=r.height-2*o,f=Object(I.n)(0,i,n.clientX-r.left-s)/i,h=1-Object(I.n)(0,c,n.clientY-r.top-o)/c;switch(u){case I.a.Hsv:{const e=O.rgbToHsv(a.toRgb()).h;l(O.rgbToHsluv(O.hsvToRgb(new O.Hsv(e,f,h))));break}case I.a.Hsluv:{const e=a.h;l(new O.Hsluv(e,100*f,100*h));break}}Object(y.b)(e)}const d=Object(T.c)(e,()=>{const t=Object(m.a)(n);if(null==t)throw{"canvas ref not fonud":n};return r=new L(t),Object(y.e)(()=>Object(y.b)(e,1)),()=>{r&&r.dispose()}}),b=Object(T.c)(e,e=>{r&&r.render(e.colorMode,e.color)},(e,t)=>e.color.is(t.color)&&e.colorMode===t.colorMode),p=Object(T.a)(e,()=>{function e(e){c=v.Default}function t(e){switch(c){case v.Default:break;case v.DownOnInner:h(e);break;case v.DownOnOuter:f(e)}}return document.body.addEventListener("mouseup",e),document.body.addEventListener("mousemove",t,{passive:!0}),()=>{document.body.removeEventListener("mouseup",e),document.body.removeEventListener("mousemove",t)}});function R(e){const n=Object(m.a)(t).getBoundingClientRect(),r=Object(I.n)(0,n.width,e.clientX-n.left),s=Object(I.n)(0,n.height,e.clientY-n.top),o=n.width*E,i=n.height*E;S(r,o,n.width-o)&&S(s,i,n.height-i)?(c=v.DownOnInner,h(e)):(c=v.DownOnOuter,f(e))}return e=>{p(),d(),b({colorMode:e.colorType,color:e.color}),a=e.color,u=e.colorType,l=e.onChange;const c=Object(m.a)(n),f=null===r?null:null===c?null:r.getThumbPositions(e.colorType,e.color,c.getBoundingClientRect());return Object(s.a)(Object(o.d)(R),Object(_.a)(t,Object(i.e)(x.container,w.a,Object(i.e)(w.a,w.a,[Object(_.a)(n,Object(i.d)(w.a,{width:160,height:160})),Object(i.e)(x.cicleThumb,null===f?w.a:{style:{left:f.circleThumbX+"px",top:f.circleThumbY+"px","background-color":e.color.toStyle(),"border-color":e.color.l>50?"black":"white",transform:"rotate("+f.angle+"deg)"}}),Object(i.e)(x.areaThumb,null===f?w.a:{style:{left:f.areaThumbX+"px",top:f.areaThumbY+"px","background-color":e.color.toStyle(),"border-color":e.color.l>50?"black":"white"}})]))))}});function S(e,t,n){return e>=t&&e<=n}class L{constructor(e){const t=e.getContext("webgl");if(null===t)throw"Failed to init webgl";t.blendFunc(WebGLRenderingContext.ONE,WebGLRenderingContext.ONE_MINUS_SRC_ALPHA),t.enable(WebGLRenderingContext.BLEND),t.disable(WebGLRenderingContext.DEPTH_TEST),this.gl=t,this.ringRenderer=new F(t),this.satValRenderer=new N(t)}render(e,t){this.gl.clearColor(0,0,0,0),this.gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.ringRenderer.render(e,t),this.satValRenderer.render(e,t)}getThumbPositions(e,t,n){let r,s,o;if(e===I.a.Hsluv)r=(t.h+180)%360,s=t.s/100,o=t.l/100;else{const e=O.rgbToHsv(t.toRgb());r=(360*e.h+180)%360,s=e.s,o=e.v}let i=0,c=0;if(null!==n){const e=80,t=n.left+e,s=n.top+e,o=r*Math.PI/180;i=t+(e-8)*Math.cos(o),c=s+(e-8)*Math.sin(o)}let a=0,u=0;if(null!==n){const e=.225*n.width,t=.55*n.width;a=n.left+e+t*s,u=n.top+e+t*(1-o)}return{angle:r,circleThumbX:i,circleThumbY:c,areaThumbX:a,areaThumbY:u}}dispose(){this.ringRenderer.dispose(),this.satValRenderer.dispose()}}const M="\nprecision highp float;\n\nattribute vec2 a_position;\n\nvarying vec2 v_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n\n    v_position = a_position;\n}\n";function k(e){return`\n    precision highp float;\n    \n    ${R.d}\n\n    ${e}\n    \n    #define INNER_RAD1 0.83\n    #define INNER_RAD2 0.85\n    #define OUTER_RAD1 0.98\n    #define OUTER_RAD2 1.00\n    \n    varying vec2 v_position;\n    \n    uniform vec3 u_color;\n    \n    void main() {\n        vec2 pos = v_position * vec2(1.0, -1.0);\n        float dist = sqrt(dot(pos, pos));\n    \n        float a = smoothstep(INNER_RAD1, INNER_RAD2, dist) - smoothstep(OUTER_RAD1, OUTER_RAD2, dist);\n    \n        float radians = atan(pos.y, pos.x);\n        float hue = (radians / TAU) + 0.5;\n    \n        vec3 hsluv = vec3(hue, 1.0, a);\n    \n        gl_FragColor = vec4(toRgb(u_color, hsluv) * a, a);\n    }\n    `}const G=k(`\n${R.g}\n\nvec3 toRgb(vec3 color, vec3 xyz) {\n    return hsvToRgb(xyz * vec3(1.0, color.y, color.z));\n}\n`),C=k(`\n${R.f}\n\nvec3 toRgb(vec3 color, vec3 xyz) {\n    return hsluvToRgb(xyz * vec3(360.0, color.y, color.z));\n}\n`);class F{constructor(e){this.gl=e,this.program=null,this.colorLocation=null,this.prevColorType=null,this.buffer=e.createBuffer(),e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),WebGLRenderingContext.STATIC_DRAW)}render(e,t){if(!this.program||this.prevColorType!==e){switch(this.program&&this.gl.deleteProgram(this.program),e){case I.a.Hsv:this.program=Object(R.i)(this.gl,M,G);break;case I.a.Hsluv:this.program=Object(R.i)(this.gl,M,C)}this.gl.bindAttribLocation(this.program,0,"a_position"),this.colorLocation=this.gl.getUniformLocation(this.program,"u_color"),this.prevColorType=e}switch(this.gl.useProgram(this.program),this.gl.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),this.gl.vertexAttribPointer(0,2,WebGLRenderingContext.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(0),e){case I.a.Hsv:{const e=O.rgbToHsv(O.hsluvToRgb(t));this.gl.uniform3f(this.colorLocation,e.h,e.s,e.v);break}case I.a.Hsluv:this.gl.uniform3f(this.colorLocation,t.h,t.s,t.l)}this.gl.drawArrays(WebGLRenderingContext.TRIANGLE_STRIP,0,4)}dispose(){this.gl.deleteBuffer(this.buffer),this.gl.deleteProgram(this.program)}}const V=.55,P=`\nprecision highp float;\n\nattribute vec2 a_position;\n\nvarying vec2 v_tex_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n\n    v_tex_position = ((a_position / ${V.toFixed(2)}) + 1.0) / 2.0;\n}\n`;function B(e){return`\n    precision highp float;\n\n    ${e}\n    \n    varying vec2 v_tex_position;\n    \n    uniform vec3 u_color;\n    \n    void main() {\n        // mix saturation from left to right [0, 1]\n        // mix value from bottom to top: [0, 1]\n        float x = v_tex_position.x;\n        float y = v_tex_position.y;\n    \n        gl_FragColor = vec4(\n            toRgb(u_color.x, x, y),\n            1.0\n        );\n    }\n    `}const z=B(`\n${R.g}\n\nvec3 toRgb(float hue, float x, float y) {\n    return hsvToRgb(vec3(hue, x, y));\n}\n`),D=B(`\n${R.f}\n\nvec3 toRgb(float hue, float x, float y) {\n    return hsluvToRgb(vec3(hue, x * 100.0, y * 100.0));\n}\n`);class N{constructor(e){this.gl=e,this.colorLocation=null,this.program=null,this.prevColorMode=null,this.buffer=e.createBuffer(),e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,new Float32Array([V,V,-V,V,V,-V,-V,V,V,-V,-V,-V]),WebGLRenderingContext.STATIC_DRAW)}render(e,t){const n=this.gl;if(!this.program||this.prevColorMode!==e){switch(this.program&&n.deleteProgram(this.program),e){case I.a.Hsv:this.program=Object(R.i)(n,P,z);break;case I.a.Hsluv:this.program=Object(R.i)(n,P,D);break;default:throw{"unexpected color mode":e}}n.bindAttribLocation(this.program,0,"a_position"),this.colorLocation=n.getUniformLocation(this.program,"u_color")}switch(n.useProgram(this.program),n.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),n.vertexAttribPointer(0,2,WebGLRenderingContext.FLOAT,!1,0,0),n.enableVertexAttribArray(0),e){case I.a.Hsv:{const e=O.rgbToHsv(O.hsluvToRgb(t));this.gl.uniform3f(this.colorLocation,e.h,e.s,e.v);break}case I.a.Hsluv:this.gl.uniform3f(this.colorLocation,t.h,t.s,t.l)}n.drawArrays(WebGLRenderingContext.TRIANGLES,0,6),this.prevColorMode=e}dispose(){const e=this.gl;e.deleteBuffer(this.buffer),e.deleteProgram(this.program)}}var U=n(33),H=n(12),W=n(20),X=n.n(W);const Y={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:U.a},q={width:"48",height:"48",viewBox:"0 0 48 48",xmlns:U.a},Z=Object(H.b)(X.a.icon,Y,Object(H.a)(w.a,{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})),$=Object(H.b)(X.a.icon,q,Object(H.a)(w.a,{d:"M14 28c-3.31 0-6 2.69-6 6 0 2.62-2.31 4-4 4 1.84 2.44 4.99 4 8 4 4.42 0 8-3.58 8-8 0-3.31-2.69-6-6-6zM41.41 9.26l-2.67-2.67c-.78-.78-2.05-.78-2.83 0L18 24.5l5.5 5.5 17.91-17.91c.79-.79.79-2.05 0-2.83z"})),K=Object(H.b)(X.a.icon,Y,Object(H.a)(w.a,{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})),J=Object(H.b)(X.a.icon,Y,Object(H.a)(w.a,{d:"M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z"})),Q=Object(H.b)(X.a.icon,Y,Object(H.a)(w.a,{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})),ee=Object(H.b)(X.a.icon,Y,Object(H.a)(w.a,{d:"M31 28h-1.59l-.55-.55C30.82 25.18 32 22.23 32 19c0-7.18-5.82-13-13-13S6 11.82 6 19s5.82 13 13 13c3.23 0 6.18-1.18 8.45-3.13l.55.55V31l10 9.98L40.98 38 31 28zm-12 0c-4.97 0-9-4.03-9-9s4.03-9 9-9 9 4.03 9 9-4.03 9-9 9z"}));var te=n(38);function ne({label:e,children:t}){return Object(i.e)(te.container,w.a,[Object(i.e)(te.label,w.a,e),t])}var re=n(25);function se({label:e,value:t,children:n}){return Object(i.e)(re.container,w.a,[Object(i.e)(re.textContainer,w.a,[Object(i.h)(re.label,w.a,e),Object(i.h)(re.label,w.a,t||"")]),Object(i.e)(re.content,w.a,n)])}var oe=n(18);function ie(){}const ce=Object(h.a)(function(e){const t=Object(g.a)(null);let n=!1,r=ie;function c(e){const n=Object(m.a)(t);let r=e.target;for(;null!==r.parentElement;){if(r===n)return;r=r.parentElement}u()}function a(){n=!0,Object(y.b)(e)}function u(){n=!1,Object(y.b)(e)}function l(e){r(e),u()}const f=Object(T.a)(e,e=>{if(e)return document.body.addEventListener("mousedown",c,{passive:!0}),()=>{document.body.removeEventListener("mousedown",c)}});return e=>{f(n),r=e.onSelect;const c=Object(m.a)(t);return Object(s.a)(Object(o.a)(u),Object(_.a)(t,Object(i.e)(oe.container,w.a,[Object(s.a)(Object(o.d)(n?u:a),Object(i.e)(n?oe.selectedDisplayExpanded:oe.selectedDisplay,w.a,e.show(e.choices.focus))),n?Object(i.e)(oe.selectableOptions,{style:{"margin-top":null===c?w.a:"calc(-0.5rem - "+c.getBoundingClientRect().height+"px)"}},[Object(i.e)(w.a,w.a,e.choices.getLeft().map(t=>Object(s.a)(Object(o.c)(()=>l(t)),Object(i.e)(oe.optionDefault,w.a,e.show(t))))),Object(s.a)(Object(o.c)(u),Object(i.e)(oe.optionSelected,w.a,e.show(e.choices.focus))),Object(i.e)(w.a,w.a,e.choices.getRight().map(t=>Object(s.a)(Object(o.c)(()=>l(t)),Object(i.e)(oe.optionDefault,w.a,e.show(t)))))]):null])))}},d.a);var ae=n(36);const ue=Object(h.d)(({spacing:e,children:t})=>{e=e||"0";const n=new Array(t.length);if(t.length>0){n[0]=Object(i.e)(ae.column,w.a,t[0]);for(let r=1;r<t.length;r++)n[r]=Object(i.e)(ae.column,{style:{"margin-left":e}},t[r])}return Object(i.e)(ae.row,w.a,n)},d.a);var le=n(26);function fe(){}const he=Object(h.a)(e=>{const t=Object(g.a)(null);let n=!1,r=fe;function c(e){e.preventDefault();const n=Object(m.a)(t).getBoundingClientRect(),s=n.width-12,o=Object(I.n)(0,s,e.clientX-n.left-6);r(o/s)}function a(){n=!1,Object(y.b)(e)}function u(e){n&&c(e)}const l=Object(T.a)(e,()=>(document.body.addEventListener("mouseup",a,{passive:!0}),document.body.addEventListener("mousemove",u,{passive:!0}),()=>{document.body.removeEventListener("mouseup",a),document.body.removeEventListener("mousemove",u)}));return a=>{r=a.onChange,l();const u=void 0!==a.color?a.color.toStyle():void 0,f=Math.max(0,Math.min(1,a.percentage));return Object(s.a)(Object(o.d)(t=>(function(t){c(t),n=!0,Object(y.b)(e)})(t),!0),Object(_.a)(t,Object(i.e)(le.container,w.a,[Object(i.e)(w.a,w.a,[Object(i.e)(0===f?le.emptyButton:le.button,{style:{left:"calc("+f+" * calc(100% - 0.75rem))","background-color":u}}),Object(i.e)(le.filledLineClass,{style:{width:100*f+"%","background-color":u}}),Object(i.e)(le.baseLine)])])))}});var de=n(39);const be=de.surfaceLook;function pe(e){return Object(i.e)(de.surface,w.a,e)}var ve=n(21);const ge=Object(h.d)(e=>{return Object(s.a)(Object(o.c)(function(){e.onCheck(!e.checked)}),Object(i.i)(ve.xswitch,void 0,[Object(i.i)(ve.switchButtonContainer,{style:{transform:e.checked?"translate(0.75rem, -0.125rem)":"translate(0, -0.125rem)"}},Object(i.i)(ve.switchButton+" "+(e.checked?ve.bgColorPrimary:ve.bgColorSecondary))),Object(i.i)(ve.switchBar)]))},d.a);n.d(t,"h",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"j",function(){return f}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return j}),n.d(t,"e",function(){return ne}),n.d(t,"f",function(){return se}),n.d(t,"g",function(){return ce}),n.d(t,"i",function(){return ue}),n.d(t,"k",function(){return he}),n.d(t,"n",function(){return be}),n.d(t,"l",function(){return pe}),n.d(t,"m",function(){return ge}),n.d(t,"d",function(){return r})},function(e,t,n){"use strict";function r(e,t,n){const r=s(e,t,WebGLRenderingContext.VERTEX_SHADER),o=s(e,n,WebGLRenderingContext.FRAGMENT_SHADER);if(null===r||null===o)return null;const i=e.createProgram();if(null===i)return null;e.attachShader(i,r),e.attachShader(i,o);const c=function(e,t){return e.linkProgram(t),null!==t||e.getProgramParameter(t,WebGLRenderingContext.LINK_STATUS)?t:(e.deleteProgram(t),null)}(e,i);return e.deleteShader(r),e.deleteShader(o),c}function s(e,t,n){const r=e.createShader(n);if(null===r)return null;if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,WebGLRenderingContext.COMPILE_STATUS))return r;!function(e){const t=e.split("\n"),n=t.length.toString().length;t.map((e,t)=>(function(e,t,n){const r=t-e.length;if(r<=0)return e;const s=[];for(let e=0;e<r;e++)s.push(n);return s.push(e),s.join("")})(t.toString(10),n,"0")+"| "+e).join("\n")}(t);return e.deleteShader(r),null}var o,i,c;n.d(t,"i",function(){return r}),n.d(t,"h",function(){return o}),n.d(t,"j",function(){return u}),n.d(t,"k",function(){return l}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return"#ifndef TAU\n    #define TAU 6.283185307179586\n#endif"}),n.d(t,"e",function(){return"\nfloat from_linear(float c) {\n    return c <= 0.0031308 \n        ? c * 12.92\n        : pow(c * 1.055, 1.0 / 2.4) - 0.055;\n}\n\nvec3 from_linear(vec3 color) {\n    return vec3(from_linear(color.x), from_linear(color.y), from_linear(color.z));\n}\n"}),n.d(t,"g",function(){return"\nvec3 hsvToRgb(in vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}"}),n.d(t,"f",function(){return"\nvec3 hsluv_intersectLineLine(vec3 line1x, vec3 line1y, vec3 line2x, vec3 line2y) {\n    return (line1y - line2y) / (line2x - line1x);\n}\n\nvec3 hsluv_distanceFromPole(vec3 pointx,vec3 pointy) {\n    return sqrt(pointx*pointx + pointy*pointy);\n}\n\nvec3 hsluv_lengthOfRayUntilIntersect(float theta, vec3 x, vec3 y) {\n    vec3 len = y / (sin(theta) - x * cos(theta));\n    if (len.r < 0.0) {len.r=1000.0;}\n    if (len.g < 0.0) {len.g=1000.0;}\n    if (len.b < 0.0) {len.b=1000.0;}\n    return len;\n}\n\nfloat hsluv_maxSafeChromaForL(float L){\n    mat3 m2 = mat3(\n         3.2409699419045214  ,-0.96924363628087983 , 0.055630079696993609,\n        -1.5373831775700935  , 1.8759675015077207  ,-0.20397695888897657 ,\n        -0.49861076029300328 , 0.041555057407175613, 1.0569715142428786  \n    );\n    float sub0 = L + 16.0;\n    float sub1 = sub0 * sub0 * sub0 * .000000641;\n    float sub2 = sub1 > 0.0088564516790356308 ? sub1 : L / 903.2962962962963;\n\n    vec3 top1   = (284517.0 * m2[0] - 94839.0  * m2[2]) * sub2;\n    vec3 bottom = (632260.0 * m2[2] - 126452.0 * m2[1]) * sub2;\n    vec3 top2   = (838422.0 * m2[2] + 769860.0 * m2[1] + 731718.0 * m2[0]) * L * sub2;\n\n    vec3 bounds0x = top1 / bottom;\n    vec3 bounds0y = top2 / bottom;\n\n    vec3 bounds1x =              top1 / (bottom+126452.0);\n    vec3 bounds1y = (top2-769860.0*L) / (bottom+126452.0);\n\n    vec3 xs0 = hsluv_intersectLineLine(bounds0x, bounds0y, -1.0/bounds0x, vec3(0.0) );\n    vec3 xs1 = hsluv_intersectLineLine(bounds1x, bounds1y, -1.0/bounds1x, vec3(0.0) );\n\n    vec3 lengths0 = hsluv_distanceFromPole( xs0, bounds0y + xs0 * bounds0x );\n    vec3 lengths1 = hsluv_distanceFromPole( xs1, bounds1y + xs1 * bounds1x );\n\n    return  min(lengths0.r,\n            min(lengths1.r,\n            min(lengths0.g,\n            min(lengths1.g,\n            min(lengths0.b,\n                lengths1.b)))));\n}\n\nfloat hsluv_maxChromaForLH(float L, float H) {\n\n    float hrad = radians(H);\n\n    mat3 m2 = mat3(\n         3.2409699419045214  ,-0.96924363628087983 , 0.055630079696993609,\n        -1.5373831775700935  , 1.8759675015077207  ,-0.20397695888897657 ,\n        -0.49861076029300328 , 0.041555057407175613, 1.0569715142428786  \n    );\n    float sub1 = pow(L + 16.0, 3.0) / 1560896.0;\n    float sub2 = sub1 > 0.0088564516790356308 ? sub1 : L / 903.2962962962963;\n\n    vec3 top1   = (284517.0 * m2[0] - 94839.0  * m2[2]) * sub2;\n    vec3 bottom = (632260.0 * m2[2] - 126452.0 * m2[1]) * sub2;\n    vec3 top2   = (838422.0 * m2[2] + 769860.0 * m2[1] + 731718.0 * m2[0]) * L * sub2;\n\n    vec3 bound0x = top1 / bottom;\n    vec3 bound0y = top2 / bottom;\n\n    vec3 bound1x =              top1 / (bottom+126452.0);\n    vec3 bound1y = (top2-769860.0*L) / (bottom+126452.0);\n\n    vec3 lengths0 = hsluv_lengthOfRayUntilIntersect(hrad, bound0x, bound0y );\n    vec3 lengths1 = hsluv_lengthOfRayUntilIntersect(hrad, bound1x, bound1y );\n\n    return  min(lengths0.r,\n            min(lengths1.r,\n            min(lengths0.g,\n            min(lengths1.g,\n            min(lengths0.b,\n                lengths1.b)))));\n}\n\nfloat hsluv_fromLinear(float c) {\n    return c <= 0.0031308 ? 12.92 * c : 1.055 * pow(c, 1.0 / 2.4) - 0.055;\n}\nvec3 hsluv_fromLinear(vec3 c) {\n    return vec3( hsluv_fromLinear(c.r), hsluv_fromLinear(c.g), hsluv_fromLinear(c.b) );\n}\n\nfloat hsluv_toLinear(float c) {\n    return c > 0.04045 ? pow((c + 0.055) / (1.0 + 0.055), 2.4) : c / 12.92;\n}\n\nvec3 hsluv_toLinear(vec3 c) {\n    return vec3( hsluv_toLinear(c.r), hsluv_toLinear(c.g), hsluv_toLinear(c.b) );\n}\n\nfloat hsluv_yToL(float Y){\n    return Y <= 0.0088564516790356308 ? Y * 903.2962962962963 : 116.0 * pow(Y, 1.0 / 3.0) - 16.0;\n}\n\nfloat hsluv_lToY(float L) {\n    return L <= 8.0 ? L / 903.2962962962963 : pow((L + 16.0) / 116.0, 3.0);\n}\n\nvec3 xyzToRgb(vec3 tuple) {\n    const mat3 m = mat3( \n        3.2409699419045214  ,-1.5373831775700935 ,-0.49861076029300328 ,\n       -0.96924363628087983 , 1.8759675015077207 , 0.041555057407175613,\n        0.055630079696993609,-0.20397695888897657, 1.0569715142428786  );\n    \n    return hsluv_fromLinear(tuple*m);\n}\n\nvec3 rgbToXyz(vec3 tuple) {\n    const mat3 m = mat3(\n        0.41239079926595948 , 0.35758433938387796, 0.18048078840183429 ,\n        0.21263900587151036 , 0.71516867876775593, 0.072192315360733715,\n        0.019330818715591851, 0.11919477979462599, 0.95053215224966058 \n    );\n    return hsluv_toLinear(tuple) * m;\n}\n\nvec3 xyzToLuv(vec3 tuple){\n    float X = tuple.x;\n    float Y = tuple.y;\n    float Z = tuple.z;\n\n    float L = hsluv_yToL(Y);\n    \n    float div = 1./dot(tuple,vec3(1,15,3)); \n\n    return vec3(\n        1.,\n        (52. * (X*div) - 2.57179),\n        (117.* (Y*div) - 6.08816)\n    ) * L;\n}\n\n\nvec3 luvToXyz(vec3 tuple) {\n    float L = tuple.x;\n\n    float U = tuple.y / (13.0 * L) + 0.19783000664283681;\n    float V = tuple.z / (13.0 * L) + 0.468319994938791;\n\n    float Y = hsluv_lToY(L);\n    float X = 2.25 * U * Y / V;\n    float Z = (3./V - 5.)*Y - (X/3.);\n\n    return vec3(X, Y, Z);\n}\n\nvec3 luvToLch(vec3 tuple) {\n    float L = tuple.x;\n    float U = tuple.y;\n    float V = tuple.z;\n\n    float C = length(tuple.yz);\n    float H = degrees(atan(V,U));\n    if (H < 0.0) {\n        H = 360.0 + H;\n    }\n    \n    return vec3(L, C, H);\n}\n\nvec3 lchToLuv(vec3 tuple) {\n    float hrad = radians(tuple.b);\n    return vec3(\n        tuple.r,\n        cos(hrad) * tuple.g,\n        sin(hrad) * tuple.g\n    );\n}\n\nvec3 hsluvToLch(vec3 tuple) {\n    tuple.g *= hsluv_maxChromaForLH(tuple.b, tuple.r) * .01;\n    return tuple.bgr;\n}\n\nvec3 lchToHsluv(vec3 tuple) {\n    tuple.g /= hsluv_maxChromaForLH(tuple.r, tuple.b) * .01;\n    return tuple.bgr;\n}\n\nvec3 hpluvToLch(vec3 tuple) {\n    tuple.g *= hsluv_maxSafeChromaForL(tuple.b) * .01;\n    return tuple.bgr;\n}\n\nvec3 lchToHpluv(vec3 tuple) {\n    tuple.g /= hsluv_maxSafeChromaForL(tuple.r) * .01;\n    return tuple.bgr;\n}\n\nvec3 lchToRgb(vec3 tuple) {\n    return xyzToRgb(luvToXyz(lchToLuv(tuple)));\n}\n\nvec3 rgbToLch(vec3 tuple) {\n    return luvToLch(xyzToLuv(rgbToXyz(tuple)));\n}\n\nvec3 hsluvToRgb(vec3 tuple) {\n    return lchToRgb(hsluvToLch(tuple));\n}\n\nvec3 rgbToHsluv(vec3 tuple) {\n    return lchToHsluv(rgbToLch(tuple));\n}\n\nvec3 hpluvToRgb(vec3 tuple) {\n    return lchToRgb(hpluvToLch(tuple));\n}\n\nvec3 rgbToHpluv(vec3 tuple) {\n    return lchToHpluv(rgbToLch(tuple));\n}\n\nvec3 luvToRgb(vec3 tuple){\n    return xyzToRgb(luvToXyz(tuple));\n}\n"}),function(e){e[e.I1=0]="I1",e[e.F1=1]="F1",e[e.F2=2]="F2",e[e.F3=3]="F3",e[e.F4=4]="F4"}(o||(o={}));class a{constructor(e,t){this.location=e,this.type=t}}function u(e,t,n){const r={},s=[];for(const o in n){if(!n.hasOwnProperty(o))continue;const i=e.getUniformLocation(t,o);null===i?s.push(o):r[o]=new a(i,n[o])}if(0===s.length)return r;let o="Failed to find location for uniforms";for(let e=0;e<s.length;e++)o+="\n - "+s[e];return null}function l(e,t,n){for(const r in t){if(!n.hasOwnProperty(r))continue;const s=t[r];switch(s.type){case o.I1:{const t=n[r];e.uniform1i(s.location,t);break}case o.F1:{const t=n[r];e.uniform1f(s.location,t);break}case o.F2:{const t=n[r];e.uniform2f(s.location,t.x,t.y);break}case o.F3:{const t=n[r];e.uniform3f(s.location,t.x,t.y,t.z);break}case o.F4:{const t=n[r];e.uniform4f(s.location,t.x,t.y,t.z,t.w);break}default:s.type;throw{"unexpected type":s}}}}!function(e){e[e.Float=0]="Float"}(i||(i={}));class f{constructor(e){switch(this.name=e.name,this.size=e.size,e.type){case i.Float:this.glType=WebGLRenderingContext.FLOAT,this.bytes=4*e.size;break;default:e.type;throw{"Unexpected type on attribute":e}}}}class h{constructor(e){{let t=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];t[n]=new f(r)}this.attributes=t}{let e=0;for(let t=0;t<this.attributes.length;t++)e+=this.attributes[t].size;this.size=e,this.stride=4*e}}bindAttribLocations(e,t){const{attributes:n}=this;for(let r=0;r<n.length;r++)e.bindAttribLocation(t,r,n[r].name)}vertexAttrib(e){const{attributes:t}=this;let n=0;for(let r=0;r<t.length;r++){const s=t[r];e.vertexAttribPointer(r,s.size,s.glType,!1,this.stride,n),n+=s.bytes}for(let n=0;n<t.length;n++)e.enableVertexAttribArray(n)}getDrawCount(e){return e/this.size}}!function(e){let t;!function(e){e[e.Normal=0]="Normal",e[e.Erase=1]="Erase"}(t=e.Mode||(e.Mode={})),e.factorsNormal={sfact:WebGLRenderingContext.ONE,dfact:WebGLRenderingContext.ONE_MINUS_SRC_ALPHA},e.factorsErase={sfact:WebGLRenderingContext.ZERO,dfact:WebGLRenderingContext.ONE_MINUS_SRC_ALPHA},e.getFactors=function(n){switch(n){case t.Normal:return e.factorsNormal;case t.Erase:return e.factorsErase}}}(c||(c={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t,n){this.r=e,this.g=t,this.b=n}static fromCss(e){return(e=e.replace(/[ \t]/,"")).startsWith("rgb(")?function(e){const t=e.split(",");if(3!==t.length)return null;const n=Number.parseFloat(t[0])/255,r=Number.parseFloat(t[1])/255,s=Number.parseFloat(t[2])/255;return a(n,r,s)}(e.substr(4,e.length-5)):e.startsWith("#")?u(e.substr(1)):u(e)}is(e){return this.r===e.r&&this.g===e.g&&this.b===e.b}toRgb(){return this}with({r:e,g:t,b:n}){return new r(void 0!==e?e:this.r,void 0!==t?t:this.g,void 0!==n?n:this.b)}toStyle(){return`rgb(${c(this.r)},${c(this.g)},${c(this.b)})`}toLinear(){return new s(o(this.r),o(this.g),o(this.b))}toString(){return"Rgb("+this.r+", "+this.g+", "+this.b+")"}}class s{constructor(e,t,n){this.r=e,this.g=t,this.b=n}is(e){return this.r===e.r&&this.g===e.g&&this.b===e.b}with({r:e,g:t,b:n}){return new s(void 0!==e?e:this.r,void 0!==t?t:this.g,void 0!==n?n:this.b)}mix(e,t){return new s(h(e,this.r,t.r),h(e,this.g,t.g),h(e,this.b,t.b))}lighten(e){return this.mix(e,s.White)}darken(e){return this.mix(e,s.Black)}fromLinear(){return new r(i(this.r),i(this.g),i(this.b))}toString(){return"LinearRgb("+this.r+", "+this.g+", "+this.b+")"}}function o(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}function i(e){return e<=.0031308?12.92*e:Math.pow(1.055*e,1/2.4)-.055}function c(e){return 255.9999999*e|0}function a(e,t,n){return isNaN(e)||!isFinite(e)?null:isNaN(t)||!isFinite(t)?null:isNaN(n)||!isFinite(n)?null:new r(e,t,n)}function u(e){if(3===e.length){return a(f(e[0])/15,f(e[1])/15,f(e[2])/15)}if(6===e.length){return a(l(e[0],e[1]),l(e[2],e[3]),l(e[4],e[5]))}return null}function l(e,t){return(16*f(e)+f(t))/255}function f(e){switch(e.toLowerCase()){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case"a":return 10;case"b":return 11;case"c":return 12;case"d":return 13;case"e":return 14;case"f":return 15;default:return NaN}}function h(e,t,n){return t+e*n}s.White=new s(1,1,1),s.Black=new s(0,0,0);class d{constructor(e,t,n){this.h=e,this.s=t,this.v=n,this.__cachedRgb=null}is(e){return this.h===e.h&&this.s===e.s&&this.v===e.v}toRgb(){return null===this.__cachedRgb&&(this.__cachedRgb=b(this)),this.__cachedRgb}toStyle(){return this.toRgb().toStyle()}with({h:e,s:t,v:n}){return new d(void 0!==e?e:this.h,void 0!==t?t:this.s,void 0!==n?n:this.v)}toString(){return"Hsv("+this.h+", "+this.s+", "+this.v+")"}}function b({h:e,s:t,v:n}){const s=6*e|0,o=6*e-s,i=n*(1-t),c=n*(1-o*t),a=n*(1-(1-o)*t);let u,l,f;switch(s%6){case 0:u=n,l=a,f=i;break;case 1:u=c,l=n,f=i;break;case 2:u=i,l=n,f=a;break;case 3:u=i,l=c,f=n;break;case 4:u=a,l=i,f=n;break;default:u=n,l=i,f=c}return new r(u,l,f)}class p{constructor(e,t){this.x=e,this.y=t}}class v{constructor(e,t,n){this.x=e,this.y=t,this.z=n}}class g{constructor(e,t,n){this.l=e,this.u=t,this.v=n}}class m{constructor(e,t,n){this.h=e,this.s=t,this.l=n,this.__cachedRgb=null}is(e){return this.h===e.h&&this.s===e.s&&this.l===e.l}with({h:e,s:t,l:n}){return new m(void 0!==e?e:this.h,void 0!==t?t:this.s,void 0!==n?n:this.l)}toRgb(){return null===this.__cachedRgb&&(this.__cachedRgb=W(this)),this.__cachedRgb}toStyle(){return this.toRgb().toStyle()}toString(){return"Hsluv("+this.h+", "+this.s+", "+this.l+")"}}class y{constructor(e,t,n){this.h=e,this.p=t,this.l=n,this.__cachedRgb=null}is(e){return this.h===e.h&&this.p===e.p&&this.l===e.l}with({h:e,p:t,l:n}){return new y(void 0!==e?e:this.h,void 0!==t?t:this.p,void 0!==n?n:this.l)}toRgb(){return null===this.__cachedRgb&&(this.__cachedRgb=X(this)),this.__cachedRgb}toStyle(){return this.toRgb().toStyle()}toString(){return"Hsv("+this.h+", "+this.p+", "+this.l+")"}}class T{constructor(e,t,n){this.l=e,this.c=t,this.h=n}}class _{constructor(e,t,n){this.x=e,this.y=t,this.z=n}}const w=[new v(3.240969941904521,-1.537383177570093,-.498610760293),new v(-.96924363628087,1.87596750150772,.041555057407175),new v(.055630079696993,-.20397695888897,1.056971514242878)],x=[new v(.41239079926595,.35758433938387,.18048078840183),new v(.21263900587151,.71516867876775,.072192315360733),new v(.019330818715591,.11919477979462,.95053215224966)],O=1,R=.19783000664283,I=.46831999493879,E=903.2962962,A=.0088564516;function j(e,t){const n=t.y/(Math.sin(e)-t.x*Math.cos(e));return n<0?-1e-4:n}function S(e){const t=Math.pow(e+16,3)/1560896,n=t>A?t:e/E,r=new Array(6);for(let t=0;t<3;t++){const s=w[t].x,o=w[t].y,i=w[t].z;for(let c=0;c<2;c++){const a=(284517*s-94839*i)*n,u=(838422*i+769860*o+731718*s)*e*n-769860*c*e,l=(632260*i-126452*o)*n+126452*c;r[2*t+c]=new p(a/l,u/l)}}return r}function L(e,t){return Math.sqrt(e*e+t*t)}function M(e){const t=S(e);let n=Number.MAX_VALUE;for(let e=0;e<2;++e){const o=t[e],i=(r=o,s=new p(-1/o.x,0),(r.y-s.y)/(s.x-r.x)),c=L(i,o.y+i*o.x);c<n&&(n=c)}var r,s;return n}function k(e,t){const n=t/360*Math.PI*2,r=S(e);let s=Number.MAX_VALUE;for(let e=0;e<r.length;e++){const t=j(n,r[e]);t>=0&&t<s&&(s=t)}return s}function G({l:e,u:t,v:n}){const r=L(t,n);if(r<1e-8)return new T(e,r,0);const s=180*Math.atan2(n,t)/Math.PI;return new T(e,r,s<0?s+360:s)}function C({l:e,c:t,h:n}){const r=n*Math.PI/180;const s=Math.cos(r)*t,o=Math.sin(r)*t;return new g(e,s,o)}function F(e,t){return[e(t[0]),e(t[1]),e(t[2])]}function V(e){const t=e.toLinear(),n=F(e=>t.r*e.x+t.g*e.y+t.b*e.z,x);return new _(n[0],n[1],n[2])}function P(e){const t=F(t=>(function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055})(e.x*t.x+e.y*t.y+e.z*t.z),w);return new r(t[0],t[1],t[2])}function B({l:e,c:t,h:n}){if(e>99.9999999)return new m(n,0,100);if(e<1e-8)return new m(n,0,0);const r=k(e,n);return new m(n,t/r*100,e)}function z({h:e,s:t,l:n}){if(n>99.9999999)return new T(100,0,e);if(n<1e-8)return new T(0,0,e);const r=k(n,e);return new T(n,r/100*t,e)}function D({l:e,c:t,h:n}){if(e>99.9999999)return new y(n,0,100);if(e<1e-8)return new y(n,0,0);const r=M(e);return new y(n,t/r*100,e)}function N({h:e,p:t,l:n}){if(n>99.9999999)return new T(100,0,e);if(n<1e-8)return new T(0,0,e);const r=M(n);return new T(n,r/100*t,e)}function U(e){return G(Y(V(e)))}function H(e){return P(q(C(e)))}function W(e){return H(z(e))}function X(e){return H(N(e))}function Y({x:e,y:t,z:n}){if(0===e&&0===t&&0===n)return new g(0,0,0);const r=(s=t)>A?116*Math.pow(s/O,1/3)-16:s/O*E;var s;if(0===r)return new g(0,0,0);return new g(r,13*r*(4*e/(e+15*t+3*n)-R),13*r*(9*t/(e+15*t+3*n)-I))}function q({l:e,u:t,v:n}){if(0===e)return new _(0,0,0);const r=t/(13*e)+R,s=n/(13*e)+I,o=((i=e)>8?Math.pow(O*((i+16)/116),3):O*i/E)*O;var i;const c=0-9*o*r/((r-4)*s-r*s);return new _(c,o,(9*o-15*s*o-s*c)/(3*s))}t.Rgb=r,t.RgbLinear=s,t.Hsv=d,t.rgbToHsv=function({r:e,g:t,b:n}){const r=Math.max(e,t,n),s=Math.min(e,t,n),o=r-s,i=0===r?0:o/r;let c;switch(r){case s:c=0;break;case e:c=(t-n)/o+(t<n?6:0);break;case t:c=(n-e)/o+2;break;default:c=(e-t)/o+4}return new d(c/6,i,r)},t.hsvToRgb=b,t.Luv=g,t.Hsluv=m,t.Hpluv=y,t.Lch=T,t.Xyz=_,t.luvToLch=G,t.lchToLuv=C,t.rgbToXyz=V,t.xyzToRgb=P,t.lchToHsluv=B,t.hsluvToLch=z,t.lchToHpluv=D,t.hpluvToLch=N,t.luvToRgb=function(e){return P(q(e))},t.rgbToLch=U,t.lchToRgb=H,t.rgbToHsluv=function(e){return B(U(e))},t.hsluvToRgb=W,t.rgbToHpluv=function(e){return D(U(e))},t.hpluvToRgb=X,t.xyzToLuv=Y,t.luvToXyz=q,t.toGray=function({r:e,g:t,b:n}){const s=Math.sqrt(.299*e*e+.587*t*t+.114*n*n);return new r(s,s,s)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i}),n.d(t,"k",function(){return c}),n.d(t,"h",function(){return a}),n.d(t,"i",function(){return u}),n.d(t,"g",function(){return l}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return d}),n.d(t,"j",function(){return b}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return v}),n.d(t,"l",function(){return g});const r=(e,t)=>Object.getOwnPropertyDescriptor(e,t),s="ssr"===e.env.IVI_TARGET?void 0:Node.prototype,o="ssr"===e.env.IVI_TARGET?void 0:Element.prototype,i="ssr"===e.env.IVI_TARGET?void 0:document,c=Object.prototype.hasOwnProperty,a="ssr"===e.env.IVI_TARGET?void 0:s.insertBefore,u="ssr"===e.env.IVI_TARGET?void 0:s.removeChild,l=("ssr"===e.env.IVI_TARGET||s.replaceChild,"ssr"===e.env.IVI_TARGET?void 0:s.cloneNode),f="ssr"===e.env.IVI_TARGET?void 0:o.setAttribute,h="ssr"===e.env.IVI_TARGET?void 0:o.setAttributeNS,d="ssr"===e.env.IVI_TARGET?void 0:o.removeAttribute,b="ssr"===e.env.IVI_TARGET?void 0:r(s,"textContent").set,p="ssr"===e.env.IVI_TARGET?void 0:r(o,"className").set,v="ssr"===e.env.IVI_TARGET?void 0:r(HTMLElement.prototype,"style").get,g="ssr"===e.env.IVI_TARGET?void 0:r(SVGElement.prototype,"style").get}).call(this,n(19))},,function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=void 0},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return c});n(11);let r=null;function s(){r=null}function o(e,t){return r={n:r,d:e,v:t}}function i(){return r}function c(e){return r=e}},function(e,t,n){"use strict";var r=n(13),s=n(48);const o=[];let i=!1;var c=n(49);function a(e,t){const n=e.length-1,r=e.pop();t!==n&&(e[t]=r)}function u(e){for(let t=0;t<e.length;++t)!0===e[t]()&&a(e,t--)}var l=n(22);function f(e){for(;e.v.length>0;){const t=e.v;e.v=[];for(let e=0;e<t.length;++e)t[e](r.c)}}n.d(t,"g",function(){return _}),n.d(t,"a",function(){return x}),n.d(t,"e",function(){return O}),n.d(t,"f",function(){return A}),n.d(t,"d",function(){return j}),n.d(t,"b",function(){return L}),n.d(t,"c",function(){return M});let h=0,d=0,b=1;const p=Promise.resolve(),v=Object(s.a)([]),g=Object(s.a)([]),m=Object(s.a)([]),y=[],T=[],_=e=>(function(e){return function(){if(!i)try{return e.apply(void 0,arguments)}catch(e){throw i=!0,o.forEach(t=>{t(e)}),e}}})(function(){h|=1,e.apply(void 0,arguments),f(v),h&=-4,++b}),w=_(c.a),x=()=>b;function O(e){v.v.push(e),0==(3&h)&&(h|=2,p.then(w))}const R=(e=>_(t=>{h|=16,e(t),0!=(4&h)&&(void 0!==t&&(d=t),u(y),0!=(32&h)&&Object(l.b)(),f(g),u(T),f(m)),h&=-61}))(c.a),I=()=>{R()};function E(e){void 0!==e&&0!=(1&e)&&0==(8&h)?0==(16&(h|=12))&&O(I):0==(4&h)&&0==(16&(h|=4))&&requestAnimationFrame(R)}function A(e,t){g.v.push(e),E(t)}function j(e,t){m.v.push(e),E(t)}function S(e){h|=32,E(e)}function L(e,t){e.f|=1024,S(t)}function M(e,t,n){const r=Object(l.c)(e=>e.container===t);r?r.next=e:l.a.push({container:t,state:null,next:e}),S(n)}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return a});const r=(e,t)=>({f:e,d:t}),s=r(16,null),o=(r(8224,null),r(8,null),(e,t)=>({t:e,v:t})),i=(e,t,n)=>({t:e,v:t,c:n}),c=(e,t,n,r)=>({t:e,v:t,c:n,n:r}),a=(e,t)=>i(s,e,t)},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o});n(14),n(17),n(6),n(33);var r=n(0);const s=Object(r.e)("path"),o=Object(r.e)("svg")}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return i});const r={},s={},o={},i={}},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});n(32),n(9),n(17);let r="",s="";function o(e){r+=` ${e}`}function i(e){s+=e}},function(e,t,n){e.exports={layersWrapper:"ui/layers__layersWrapper",layersListWrapper:"ui/layers__layersListWrapper",layersControlsWrapper:"ui/layers__layersControlsWrapper",unselectedLayerWrapper:"ui/layers__unselectedLayerWrapper",selectedLayerWrapper:"ui/layers__selectedLayerWrapper",layerLeft:"ui/layers__layerLeft",layerRight:"ui/layers__layerRight",layerName:"ui/layers__layerName",layerOpacity:"ui/layers__layerOpacity"}},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m});var r=n(13),s=n(6),o=n(33),i=n(32),c=n(9);let a,u;function l(){a=null,u=0}function f(e,t){let n=t(e);if(0!==n)return 1&n;const{f:r,c:s}=e;if(0!=(136&r)){for(n=0;n<s.length;n++)if(null!==(e=s[n])&&0!=(1&f(e,t)))return 1}else if(null!==s)return f(s,t);return 0}function h(e){let t,n=e.f;if(0==(3&n)){if(e=e.c,0!=(136&n)){for(n=0;n<e.length;n++)if(null!==(t=e[n]))return h(t);return null}return null===e?null:h(e)}return e.s}function d(e,t,n,o){const i=t.f;let l,f,p,v;if(0!=(256&i))l=t.s,0!=(1024&i)||null!==l.s&&!0===l.s(r.b)?t.c=m(e,t.c,l.r(t.o.v),n,o):0!=(65536&i)?d(e,t.c,n,o):!0===n?b(e,t):a=h(t),t.f=64511&t.f|u,u|=(49152&t.f)<<2;else if(0!=(65536&i)){if(f=t.c,0!=(2&i))l=t.s,!0===n&&s.h.call(e,l,a),a=null,d(l,f,!1,!0),a=l;else if(0!=(136&i)){for(v=0,p=f.length;p>0;)null!==(l=f[--p])&&(d(e,l,n,!1),v|=u,u=0);u=v}else 0!=(20&i)?d(e,f,n,o):(l=Object(c.d)(t.s),d(e,f,n,o),Object(c.d)(l));t.f=64511&i|u}else!0===n?b(e,t):a=h(t),u=196608&i}function b(e,t){const n=t.f;let r,o,i;if(0!=(3&n))o=t.s,s.h.call(e,o,a),a=o;else if(r=t.c,0!=(136&n))for(i=r.length;i>0;)null!==(o=r[--i])&&b(e,o);else null!==r&&b(e,r)}function p(e,t,n){!function e(t,n,r){let o,i=n.f;if(0!=(3&i))s.i.call(t,n.s);else if(n=n.c,0!=(136&i))if(!0===r)s.j.call(t,"");else for(i=0;i<n.length;++i)null!==(o=n[i])&&e(t,o,!1);else null!==n&&e(t,n,r)}(e,t,n),function e(t){const n=t.f;let s,o,i;if(0!=(131072&n)&&null!==(s=t.c))if(0!=(136&n))for(o=0;o<s.length;o++)null!==(i=s[o])&&e(i);else e(s);if(0!=(32768&n)&&null!==(i=t.s.u))if("function"==typeof i)i(r.d);else for(o=0;o<i.length;o++)i[o](r.d)}(t)}function v(e,t){const{t:n,v:r,n:i}=t,c=0!=(512&n.f);if(void 0===e){const t=n.d;e=c?s.a.createElementNS(o.a,t):s.a.createElement(t)}return i&&y(e,i,c),void 0!==r&&T(e,void 0,r,c),e}function g(e,t){if(null!==t){const n=Object(i.a)(t);return"object"==typeof t?t instanceof Array?function(e,t,n){let r=n.length,s=0;const o=Array(r);for(;r>0;)o[--r]=g(e,n[r]),s|=u,u=0;u=s,t.c=o,t.f=128|s}(e,n,t):function(e,t,n){const r=n.t,o=r.f;let i,l,f,h,d;if(0!=(4&o))0!=(256&o)?(t.s=i={r:null,s:null,u:null},i.r=l=r.d.c(t)):l=r.d.c,t.c=g(e,l(n.v)),t.f|=o|u,u|=(49152&t.f)<<2;else{if(0!=(2&o))l=r.d,0!=(64&o)&&(null===(f=l.n)&&(l.n=f=v(void 0,l.p)),f=s.g.call(f,!1)),t.s=f=v(f,n),i=a,null!==(l=n.c)&&(a=null,t.c=g(f,l)),a=f,s.h.call(e,f,i);else if(0!=(48&o))0!=(32&o)?(t.s=i=0!=(8192&o)?Object(c.d)(n.v):Object(c.b)(r.d,n.v),t.c=g(e,n.c),Object(c.d)(i)):t.c=g(e,n.c);else{for(d=0,h=(f=n.v).length,t.c=l=Array(h);h>0;)l[--h]=g(e,f[h].v),d|=u,u=0;u=d}t.f=o|u}}(e,n,t):function(e,t,n){const r=s.a.createTextNode(n);s.h.call(e,r,a),a=r,t.s=r,t.f=1}(e,n,t),n}return null}function m(e,t,n,r,o){if(null===n)return null!==t&&p(e,t,o),null;if(null===t)return g(e,n);const{f:i,o:l,s:f}=t;if(0!=(1&i)){if("object"==typeof n)return s.i.call(e,f),g(e,n);t.o=n,l!==n&&(f.nodeValue=n),!0===r&&s.h.call(e,f,a),a=f}else{if(l===n)return d(e,t,r,o),t;if(0!=(128&i)?!(n instanceof Array):n instanceof Array||l.t!==n.t)return p(e,t,o),g(e,n);t.o=n;const h=t.c;let b,v,_,w,x;if(0!=(4&i))b=l.v,v=n.v,_=n.t.d,b===v||void 0!==_.e&&!0===_.e(b,v)?d(e,t,r,o):(t.c=m(e,h,0!=(256&i)?f.r(v):_.c(v),r,o),t.f=64511&t.f|u,u|=(49152&t.f)<<2);else{if(0!=(2&i))w=0!=(512&i),!0===r&&s.h.call(e,f,a),_=n.n,l.n!==_&&(void 0===_&&(_=""),y(f,_,w)),_=n.v,l.v!==_&&T(f,l.v,_,w),a=null,t.c=m(f,h,n.c,!1,!0),a=f;else if(0!=(136&i))if(0!=(128&i))if(0===(w=n.length))p(e,t,o);else{if(x=0,w!==(b=h.length)){for(t.c=_=Array(w);b>w;)null!==(v=h[--b])&&p(e,v,!1);for(;w>b;)_[--w]=g(e,n[w]),x|=u,u=0}else _=h;for(;w>0;)_[--w]=m(e,h[w],n[w],r,!1),x|=u,u=0;u=x}else!function(e,t,n,r,s,o){let i=r.length,c=n.length,a=0;const l=Array(i);if(0===i)c>0&&p(e,t,o);else if(0===c)for(;i>0;)l[--i]=g(e,r[i].v),a|=u,u=0;else{const f=t.c;let h=c-1,d=i-1,b=0,v=r[d];e:for(;;){for(;n[h].k===v.k;){if(l[d]=m(e,f[h--],v.v,s,!1),a|=u,u=0,b>--d||b>h)break e;v=r[d]}for(;n[b].k===r[b].k&&++b<=h&&b<=d;);break}if(b>h)for(;d>=b;)l[d]=g(e,r[d--].v),a|=u,u=0;else if(b>d){i=b;do{null!==(v=f[i++])&&p(e,v,!1)}while(i<=h)}else{let y=0,T=0;const _=h-b+1,w=d-b+1,x=Array(w),O=new Map;for(i=0;i<w;++i)c=i+b,x[i]=-1,O.set(r[c].k,c);for(i=b;i<=h&&T<w;++i)void 0!==(c=O.get(n[i].k))&&(y=y<c?c:99999999,++T,x[c-b]=i,l[c]=f[i],f[i]=null);if(_===n.length&&0===T)for(p(e,t,o);d>=0;)l[d]=g(e,r[d--].v),a|=u,u=0;else{for(i=b;i<=h;i++)null!==(v=f[i])&&p(e,v,!1);if(i=w,!0===s||99999999!==y)for(;i>0;)y=--i+b,v=r[y].v,l[y]=-1===x[i]?g(e,v):m(e,l[y],v,s,!1),a|=u,u=0;else{const t=function(e){const t=e.slice(),n=[];let r,s,o,i=0,c=0;for(n[0]=0;c<e.length;++c){const a=e[c];if(a>-1)if(o=n[i],e[o]<a)t[c]=o,n[++i]=c;else{for(r=0,s=i;r<s;)e[n[o=r+s>>1]]<a?r=o+1:s=o;a<e[n[r]]&&(r>0&&(t[c]=n[r-1]),n[r]=c)}}s=n[i];for(;i>=0;)n[i--]=s,s=t[s];return n}(x);for(c=t.length-1;i>0;)y=--i+b,v=r[y].v,-1===x[i]?l[y]=g(e,v):(c<0||i!==t[c]?s=!0:--c,l[y]=m(e,l[y],v,s,!1),s=!1),a|=u,u=0}}}for(;b>0;)l[--b]=m(e,f[b],r[b].v,s,!1),a|=u,u=0}t.c=l,u=a}(e,t,l.v,n.v,r,o);else 0!=(16&i)?t.c=m(e,h,n.c,r,o):(v=n.v,0!=(8192&i)?t.s=v:f.v=v,_=Object(c.d)(t.s),t.c=m(e,h,n.c,r,o),Object(c.d)(_));t.f=64511&i|u}}return t}function y(e,t,n){!0===n?s.c.call(e,"class",t):s.e.call(e,t)}function T(e,t,n,r){let o;if(void 0===t)for(o in n)_(e,o,void 0,n[o],r);else if(void 0===n)for(o in t)_(e,o,t[o],void 0,r);else{let i=0,c=0;for(o in t)_(e,o,t[o],!0===s.k.call(n,o)?(i++,n[o]):void 0,r);const a=Object.keys(n);for(;i<a.length&&c<a.length;++c)o=a[c],!1===s.k.call(t,o)&&(_(e,o,void 0,n[o],r),++i)}}function _(e,t,n,r,o){"style"!==t?"object"==typeof r?r.u(e,t,void 0===n?void 0:n.v,r.v):"object"==typeof n?n.u(e,t,n.v,void 0):n!==r&&("boolean"==typeof r&&(r=r?"":void 0),void 0===r?void 0!==n&&!1!==n&&s.b.call(e,t):s.c.call(e,t,r)):n!==r&&function(e,t,n,r){const o=!0===r?s.l.call(e):s.f.call(e);let i,c;if(void 0===t)for(i in n)void 0!==(c=n[i])&&o.setProperty(i,c);else if(void 0===n)for(i in t)void 0!==t[i]&&o.removeProperty(i);else{let e=0,r=0;for(i in t)t[i]!==(c=!0===s.k.call(n,i)?(e++,n[i]):void 0)&&(void 0!==c?o.setProperty(i,c):o.removeProperty(i));const a=Object.keys(n);for(;e<a.length&&r<a.length;++r)i=a[r],!1===s.k.call(t,i)&&(c=n[i],++e,void 0!==c&&o.setProperty(i,n[i]))}}(e,n,r,o)}},function(e,t,n){"use strict";function r(e){if("string"==typeof e){if(-1===e.indexOf("&")&&-1===e.indexOf("<"))return e;let t=e,n=0,r=0;for(;r<e.length;++r){let s;switch(e.charCodeAt(r)){case 38:s="&amp;";break;case 60:s="&lt;";break;default:continue}r>n&&(s=e.slice(n,r)+s),t=n>0?t+s:s,n=r+1}return r!==n?t+e.slice(n,r):t}return e.toString()}function s(e){if("string"==typeof e){if(-1===e.indexOf('"')&&-1===e.indexOf("&"))return e;let t=e,n=0,r=0;for(;r<e.length;++r){let s;switch(e.charCodeAt(r)){case 34:s="&quot;";break;case 38:s="&amp;";break;default:continue}r>n&&(s=e.slice(n,r)+s),t=n>0?t+s:s,n=r+1}return r!==n?t+e.slice(n,r):t}return e.toString()}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s})},function(e,t,n){e.exports={container:"ui/views/menu__container",selectedDisplay:"ui/views/menu__selectedDisplay",selectedDisplayExpanded:"ui/views/menu__selectedDisplayExpanded",selectableOptions:"ui/views/menu__selectableOptions",optionDefault:"ui/views/menu__optionDefault",optionSelected:"ui/views/menu__optionSelected"}},function(e,t){var n,r,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,u=[],l=!1,f=-1;function h(){l&&a&&(l=!1,a.length?u=a.concat(u):f=-1,u.length&&d())}function d(){if(!l){var e=c(h);l=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new b(e,t)),1!==u.length||l||c(d)},b.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,n){e.exports={icon:"ui/views/icons__icon"}},function(e,t,n){e.exports={xswitch:"ui/views/switch__xswitch",switchButtonContainer:"ui/views/switch__switchButtonContainer",switchButton:"ui/views/switch__switchButton",bgColorPrimary:"ui/views/switch__bgColorPrimary",bgColorSecondary:"ui/views/switch__bgColorSecondary",switchBar:"ui/views/switch__switchBar"}},function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i});var r=n(16);const s=[],o=e=>s.find(e);function i(){for(let e=0;e<s.length;++e){const t=s[e],{container:n,state:o,next:i}=t;Object(r.b)(),void 0!==i?(t.next=void 0,t.state=Object(r.c)(n,o,i,!1,!0)):null!==o&&Object(r.a)(n,o,!1,!0)}}},function(e,t,n){"use strict";(function(e){n.d(t,"d",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l});var r=n(13),s=n(10);function o(t,n,o){if("ssr"===e.env.IVI_TARGET)return e=>n(e,void 0);let i,c,a=0;const u=t.s.s,l=e=>e===r.b?null!==u&&!0===u(r.b)||void 0!==i&&(e=n(c,i),a=Object(s.a)(),i!==e)&&(i=e,!0):(void 0===i||c===e||void 0!==o&&!0===o(c,e)||(i=void 0),(void 0===i||a<Object(s.a)())&&(i=n(e,i)),c=e,i);return t.s.s=l,l}function i(t,n){if("ssr"!==e.env.IVI_TARGET){t.f|=32768;const e=t.s;e.u=function(e,t){return null===e?t:"function"==typeof e?[e,t]:(e.push(t),e)}(e.u,n)}}function c(e){return(t,n,s)=>{let o,c=r.a;const a=u=>{u===r.c||u===r.d?(void 0!==o&&o(),u!==r.d&&void 0!==(o=n(c))&&void 0!==t&&(i(t,a),t=void 0)):c!==r.a&&(c===u||void 0!==s&&!0===s(c,u))||(c=u,e(a))};return a}}const a="ssr"===e.env.IVI_TARGET?e=>{}:c(e=>{e(r.c)}),u="ssr"===e.env.IVI_TARGET?e=>{}:c(s.f),l="ssr"===e.env.IVI_TARGET?e=>{}:c(s.d)}).call(this,n(19))},function(e,t,n){e.exports={wrapper:"ui/index__wrapper",bottomLeft:"ui/index__bottomLeft",bottomRight:"ui/index__bottomRight",appContainer:"ui/index__appContainer",layersViewContainer:"ui/index__layersViewContainer",canvas:"ui/index__canvas"}},function(e,t,n){e.exports={container:"ui/views/labeled__container",label:"ui/views/labeled__label",content:"ui/views/labeled__content",textContainer:"ui/views/labeled__textContainer"}},function(e,t,n){e.exports={container:"ui/views/slider__container",baseLine:"ui/views/slider__baseLine",filledLineClass:"ui/views/slider__filledLineClass",emptyButton:"ui/views/slider__emptyButton",button:"ui/views/slider__button"}},function(e,t,n){e.exports={container:"ui/debugging__container",contentContainer:"ui/debugging__contentContainer",monospaced:"ui/debugging__monospaced",codeInput:"ui/debugging__codeInput"}},function(e,t,n){e.exports={primary:"ui/views/buttons__primary",ddefault:"ui/views/buttons__ddefault",sinkableUnsunk:"ui/views/buttons__sinkableUnsunk",sinkableSunk:"ui/views/buttons__sinkableSunk"}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(30);r.a;const s=!r.a||{capture:!0,passive:!1};r.a,r.a},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});const r="ssr"!==e.env.IVI_TARGET&&("electron"===e.env.IVI_TARGET||(()=>{let e=!1;try{window.addEventListener("_",null,{get passive(){return e=!0}})}catch(e){}return e})());"ssr"!==e.env.IVI_TARGET&&("electron"===e.env.IVI_TARGET||e.env.IVI_TARGET),"ssr"!==e.env.IVI_TARGET&&("electron"===e.env.IVI_TARGET||e.env.IVI_TARGET),"ssr"!==e.env.IVI_TARGET&&window,"ssr"!==e.env.IVI_TARGET&&("electron"===e.env.IVI_TARGET||window),"browser"===e.env.IVI_TARGET&&window,"ssr"!==e.env.IVI_TARGET&&("electron"===e.env.IVI_TARGET||window)}).call(this,n(19))},,function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=e=>({o:e,f:0,c:null,s:null})},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return o});const r="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink",o="http://www.w3.org/XML/1998/namespace"},function(e,t,n){e.exports={container:"ui/views/colorDisplay__container",secondary:"ui/views/colorDisplay__secondary",primary:"ui/views/colorDisplay__primary"}},function(e,t,n){e.exports={container:"ui/views/colorWheel__container",cicleThumb:"ui/views/colorWheel__cicleThumb",areaThumb:"ui/views/colorWheel__areaThumb"}},function(e,t,n){e.exports={row:"ui/views/row__row",column:"ui/views/row__column"}},function(e,t,n){e.exports={textInput:"ui/brush__textInput",detailsContainer:"ui/brush__detailsContainer"}},function(e,t,n){e.exports={container:"ui/views/inlineLabeled__container",label:"ui/views/inlineLabeled__label"}},function(e,t,n){e.exports={surfaceLook:"ui/views/surface__surfaceLook",surface:"ui/views/surface__surface"}},function(e,t,n){e.exports={toolBarContainer:"ui/toolbar__toolBarContainer",leftBar:"ui/toolbar__leftBar"}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});var r=n(49);n(10),n(14);const s={v:void 0,s:r.a}}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(22);function s(e,t){const n=[],s=Object(r.c)(t=>t.container.contains(e));if(s){const r=s.container;r!==e&&function e(t,n,r,s,o){const i=r.parentNode;return i===s||null!==(o=e(t,n,i,s,o))?function e(t,n,r,s){if(null!==s){const{f:o,c:i}=s;let c;if(0!=(2&o)){if(s.s===r)return s;if(null!==i)return e(t,n,r,i)}else if(0!=(52&o)){if(null!==(c=e(t,n,r,s.c)))return 0!=(16&o)&&function e(t,n,r,s){if(null!==r)if(r instanceof Array){let o=r.length;for(;--o>=0;)e(t,n,r[o],s)}else{const e=r.d.s;("function"==typeof e&&!0===e(s)||e===s)&&t.push({t:n,h:r})}}(t,s,s.o.v,n),c}else if(0!=(136&o))for(let s=0;s<i.length;s++)if(null!==(c=e(t,n,r,i[s])))return c}return null}(t,n,r,o):null}(n,t,e,r,s.state)}return n}function o(e,t,n){const r=s(t,e);let o,i,c=r.length;if(c>0){for(;--c>=0;)if(0!=(1&(i=(o=r[c]).h.d).f)&&!0===i.h(n,o,e))return;for(;++c<r.length;)if(0==(1&(i=(o=r[c]).h.d).f)&&!0===i.h(n,o,e))return}}},function(e,t,n){e.exports={detailsContainer:"ui/eraser__detailsContainer"}},function(e,t,n){e.exports={container:"ui/miniMap__container"}},function(e,t,n){"use strict";var r=n(0),s=n(23),o=n(10),i=n(8),c=n(48),a=n(50),u=n(51),l=n(11),f=n(47),h=n(2),d=n(27),b=n.n(d),p=n(3);const v=Object(r.a)(e=>{let t=g.empty;const n=Object(s.a)(e,n=>{const{dispose:r}=n.subscribe(n=>{t=t.update(n),Object(o.b)(e)});return r});return e=>{n(e.samplesSignal);const r=t.length();let s=Number.MIN_VALUE,o=0;return t.forEach((e,t)=>{const n=e.endMs-e.startMs;o+=n,n>s&&(s=n)}),Object(h.e)(i.a,i.a,[Object(h.e)(i.a,i.a,"Max: "+s.toFixed(3)+" ms"),Object(h.e)(i.a,i.a,"Avg: "+(o/r).toFixed(3)+" ms")])}});class g{constructor(e,t,n,r){this.sample0=e,this.sample1=t,this.sample2=n,this.sample3=r}update(e){return new g(e,this.sample0,this.sample1,this.sample2)}length(){return this.sample0.length+this.sample1.length+this.sample2.length+this.sample3.length}forEach(e){let t=this.sample0,n=0;for(let n=0;n<t.length;n++)e(t[n],n);n+=t.length,t=this.sample1;for(let r=0;r<t.length;r++)e(t[r],n+r);n+=t.length,t=this.sample2;for(let r=0;r<t.length;r++)e(t[r],n+r);n+=t.length,t=this.sample3;for(let r=0;r<t.length;r++)e(t[r],n+r)}}g.empty=new g([],[],[],[]);const m=Object(r.a)(e=>{const t=Object(c.a)(null);let n="";function r(t){n=t.target.value,Object(o.b)(e)}function b(r){const s=Object(a.a)(t);null!==s&&s===r.target&&("Enter"!==r.key||r.shiftKey||r.altKey||(r.preventDefault(),n="",Object(o.b)(e)))}const p=Object(s.a)(e,()=>(document.body.addEventListener("keydown",b),()=>{document.body.removeEventListener("keydown",b)}));return e=>(p(),Object(h.e)(i.a,i.a,[Object(h.e)(i.a,i.a,["Variables",Object(h.k)(i.a,i.a,Object(h.g)(i.a,i.a,[Object(h.i)(d.monospaced,i.a,"gl"),": WebGLRenderingContext"]))]),Object(u.a)(t,Object(l.a)(Object(f.b)(r),Object(h.j)(d.codeInput,{content:Object(h.a)(n)})))]))}),y=Object(r.a)(e=>{let t=!1;function n(){t=!0,Object(o.b)(e)}function r(){t=!1,Object(o.b)(e)}return e=>{const{state:s}=e;return Object(p.l)(t?Object(h.e)(d.container,i.a,[Object(p.c)({content:"Close",onClick:r}),Object(h.e)(d.contentContainer,i.a,["RNG: ",Object(h.e)(d.monospaced,i.a,s.rng.display()),v({samplesSignal:e.perfSamplesSignal}),m({gl:e.gl})])]):Object(p.c)({onClick:n,content:"Debug"}))}})},function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(48),o=n(10),i=n(50),c=n(23),a=n(8),u=n(51),l=n(2),f=n(24),h=n(54),d=n(1);function b(e){return{prevPoint:e}}function p(e,t,n){if(null===t){return[{prevPoint:n},[{alpha:n.alpha,color:n.color,position:n.position,rotation:n.rotation,scaledDiameter:e.diameterPx*n.pressure}]]}const r=t.prevPoint,s=function(e,t,n){const r=[],s=n.position.x,o=n.position.y,i=n.pressure,c=Math.max(e*i,.05);let a=t.position.x,u=t.position.y,l=t.pressure;const f=Object(d.q)(a,u,s,o);let h=f,b=.5,p=a,v=u,g=l;for(;h>c&&b>0;)a+=(b=e*l/h)*(s-a),u+=b*(o-u),l+=b*(i-l),h=Object(d.q)(a,u,s,o),a===p&&u===v&&l===g||(r.push(1-h/f),p=a,v=u,g=l);return r}(e.spacingPct*e.diameterPx,r,n);if(0===s.length)return[t,[]];const o=r.pressure===n.pressure,i=r.alpha===n.alpha,c=r.color.is(n.color),a=r.rotation===n.rotation,u=s.length,l=new Array(u);for(let t=0;t<u;t++){const u=s[t],f=i?r.alpha:Object(d.r)(u,r.alpha,n.alpha),h=c?r.color:r.color.mix(u,n.color),b=d.i.lerp(u,r.position,n.position),p=e.diameterPx*(o?r.pressure:Object(d.r)(u,r.pressure,n.pressure)),v=a?r.rotation:Object(d.r)(u,r.rotation,n.rotation);l[t]={alpha:f,color:h,position:b,scaledDiameter:p,rotation:v}}const f=l[s.length-1];return[{prevPoint:{alpha:f.alpha,color:f.color,position:f.position,pressure:Object(d.r)(s[s.length-1],r.pressure,n.pressure),rotation:f.rotation}},l]}function v(e){return e**.92}function g(e){return{duration:e}}function m(e,t,n){return{pressure:Object(d.r)(e,t.pressure,n.pressure),x:Object(d.r)(e,t.x,n.x),y:Object(d.r)(e,t.y,n.y)}}function y(e,t){return{startTime:e,start:t,end:t}}function T(e,t,n,r){if(0===e.duration)return[{startTime:n,start:r,end:r},r];const s=n-t.startTime,o=m(v(Math.min(s/e.duration,1)),t.start,r);return[{startTime:n,start:o,end:r},o]}function _(e,t,n){const r=n-t.startTime;return r>=e.duration?[t,t.end]:[t,m(v(Math.min(r/e.duration,1)),t.start,t.end)]}var w,x,O,R,I=n(5);!function(e){class t{isEmpty(){return!0}isNonEmpty(){return!1}cons(e){return new n(e,this)}foldl(e,t){return t}reverse(){return this}toArray(){return[]}toString(){return"()"}}e.Empty=t;class n{constructor(e,t){this.head=e,this.tail=t}static of(e){return new n(e,r())}isEmpty(){return!1}isNonEmpty(){return!0}cons(e){return new n(e,this)}foldl(e,t){let n=this,r=t;for(;n.isNonEmpty();)r=e(r,n.head),n=n.tail;return r}reverse(){let e=this.tail,t=n.of(this.head);for(;e.isNonEmpty();)t=t.cons(e.head),e=e.tail;return t}toArray(){const e=[this.head];let t=this.tail;for(;t.isNonEmpty();)e.push(t.head),t=t.tail;return e}toString(){let e="("+this.head,t=this.tail;for(;t.isNonEmpty();)e=e+", "+t.head,t=t.tail;return e+")"}}function r(){return new t}e.NonEmpty=n,e.empty=r,e.fromArray=function(e){let t=r(),n=e.length;for(;n--;)t=t.cons(e[n]);return t}}(w||(w={}));class E{constructor(e,t,n){this.__left=e,this.focus=t,this.__right=n}static singleton(e){return new E(w.empty(),e,w.empty())}static fromArray(e){return 0===e.length?null:E.unsafeFromArray(e)}static unsafeFromArray(e){let t=w.empty();for(let n=e.length-1;n>0;n--)t=t.cons(e[n]);return new E(w.empty(),e[0],t)}getLeft(){return this.__left.reverse().toArray()}getRight(){return this.__right.toArray()}hasLeft(){return this.__left.isNonEmpty()}hasRight(){return this.__right.isNonEmpty()}focusLeft(){return this.__left.isNonEmpty()?new E(this.__left.tail,this.__left.head,this.__right.cons(this.focus)):this}focusRight(){return this.__right.isNonEmpty()?new E(this.__left.cons(this.focus),this.__right.head,this.__right.tail):this}focusf(e){if(e(this.focus))return this;let t=this;for(;t.hasLeft();)if(e((t=t.focusLeft()).focus))return t;for(t=this;t.hasRight();)if(e((t=t.focusRight()).focus))return t;return this}toArray(){const e=[];let t=this.__left.reverse();for(;t.isNonEmpty();)e.push(t.head),t=t.tail;for(e.push(this.focus),t=this.__right;t.isNonEmpty();)e.push(t.head),t=t.tail;return e}}!function(e){e[e.SetDiameterMsg=0]="SetDiameterMsg",e[e.SetSoftnessMsg=1]="SetSoftnessMsg",e[e.SetOpacityMsg=2]="SetOpacityMsg",e[e.SetColorMsg=3]="SetColorMsg",e[e.SetColorModeMsg=4]="SetColorModeMsg",e[e.SetSpacingMsg=5]="SetSpacingMsg",e[e.SetPressureAffectsOpacityMsg=6]="SetPressureAffectsOpacityMsg",e[e.SetPressureAffectsSizeMsg=7]="SetPressureAffectsSizeMsg",e[e.SwapColorMsg=8]="SwapColorMsg",e[e.SetDelayMsg=9]="SetDelayMsg"}(x||(x={}));class A{constructor(e){this.diameterPx=e,this.type=x.SetDiameterMsg}}class j{constructor(e){this.softnessPct=e,this.type=x.SetSoftnessMsg}}class S{constructor(e){this.opacityPct=e,this.type=x.SetOpacityMsg}}class L{constructor(e){this.color=e,this.type=x.SetColorMsg}}class M{constructor(e){this.mode=e,this.type=x.SetColorModeMsg}}class k{constructor(e){this.spacingPct=e,this.type=x.SetSpacingMsg}}class G{constructor(e){this.pressureAffectsOpacity=e,this.type=x.SetPressureAffectsOpacityMsg}}class C{constructor(e){this.pressureAffectsSize=e,this.type=x.SetPressureAffectsSizeMsg}}class F{constructor(){this.type=x.SwapColorMsg}}class V{constructor(e){this.delayMs=e,this.type=x.SetDelayMsg}}class P{constructor(e){this.sendMessage=e,this.setColor=e=>{this.sendMessage(new L(e))},this.setColorMode=e=>{this.sendMessage(new M(e))},this.setDelay=e=>{this.sendMessage(new V(e))},this.setDiameter=e=>{this.sendMessage(new A(e))},this.setOpacity=e=>{this.sendMessage(new S(e))},this.setSoftness=e=>{this.sendMessage(new j(e))},this.setSpacing=e=>{this.sendMessage(new k(e))},this.setPressureAffectsOpacity=e=>{this.sendMessage(new G(e))},this.setPressureAffectsSize=e=>{this.sendMessage(new C(e))},this.swapColorFrom=()=>{this.sendMessage(new F)}}}function B(e,t){switch(t.type){case x.SetDiameterMsg:return Object.assign({},e,{diameterPx:Object(d.n)(.1,500,t.diameterPx)});case x.SetSoftnessMsg:return Object.assign({},e,{softness:Object(d.n)(0,1,t.softnessPct)});case x.SetOpacityMsg:return Object.assign({},e,{flowPct:Object(d.n)(.01,1,t.opacityPct)});case x.SetColorMsg:return Object.assign({},e,{color:t.color});case x.SetColorModeMsg:return Object.assign({},e,{colorMode:e.colorMode.focusf(e=>e===t.mode)});case x.SetSpacingMsg:return Object.assign({},e,{spacingPct:Object(d.n)(.01,1,t.spacingPct)});case x.SetPressureAffectsOpacityMsg:return Object.assign({},e,{pressureAffectsOpacity:t.pressureAffectsOpacity});case x.SetPressureAffectsSizeMsg:return Object.assign({},e,{pressureAffectsSize:t.pressureAffectsSize});case x.SwapColorMsg:return Object.assign({},e,{color:e.colorSecondary,colorSecondary:e.color});case x.SetDelayMsg:return Object.assign({},e,{delay:g(Object(d.n)(0,500,t.delayMs))});default:throw{"unexpected msg":t}}}function z(e,t,n){const r=D(e,n);return[{interpState:b(U(t,r)),delayState:y(n.time,r)},N(t,r)]}function D(e,t){return{x:t.x,y:t.y,pressure:t.pressure}}function N(e,t){const n=e.flowPct*t.pressure;return{alpha:n,color:1===n?e.color.toRgb().toLinear():e.color.toRgb().toLinear().mix(1-n,I.RgbLinear.Black),position:new d.i(t.x,t.y),rotation:0,scaledDiameter:e.diameterPx*t.pressure}}function U(e,t){const n=e.flowPct*t.pressure;return{alpha:n,color:1===n?e.color.toRgb().toLinear():e.color.toRgb().toLinear().mix(1-n,I.RgbLinear.Black),position:new d.i(t.x,t.y),pressure:t.pressure,rotation:0}}!function(e){e[e.SetDiameterMsg=0]="SetDiameterMsg",e[e.SetSoftnessMsg=1]="SetSoftnessMsg",e[e.SetOpacityMsg=2]="SetOpacityMsg",e[e.SetSpacingMsg=3]="SetSpacingMsg",e[e.SetPressureAffectsOpacityMsg=4]="SetPressureAffectsOpacityMsg",e[e.SetPressureAffectsSizeMsg=5]="SetPressureAffectsSizeMsg",e[e.SetDelayMsg=6]="SetDelayMsg"}(O||(O={}));class H{constructor(e){this.diameterPx=e,this.type=O.SetDiameterMsg}}class W{constructor(e){this.softnessPct=e,this.type=O.SetSoftnessMsg}}class X{constructor(e){this.opacityPct=e,this.type=O.SetOpacityMsg}}class Y{constructor(e){this.spacingPct=e,this.type=O.SetSpacingMsg}}class q{constructor(e){this.pressureAffectsOpacity=e,this.type=O.SetPressureAffectsOpacityMsg}}class Z{constructor(e){this.pressureAffectsSize=e,this.type=O.SetPressureAffectsSizeMsg}}class ${constructor(e){this.delayMs=e,this.type=O.SetDelayMsg}}class K{constructor(e){this.sendMessage=e,this.setDelay=e=>{this.sendMessage(new $(e))},this.setDiameter=e=>{this.sendMessage(new H(e))},this.setSoftness=e=>{this.sendMessage(new W(e))},this.setOpacity=e=>{this.sendMessage(new X(e))},this.setSpacing=e=>{this.sendMessage(new Y(e))},this.setPressureAffectsOpacity=e=>{this.sendMessage(new q(e))},this.setPressureAffectsSize=e=>{this.sendMessage(new Z(e))}}}function J(e,t){return{x:t.x,y:t.y,pressure:t.pressure}}function Q(e,t){switch(t.type){case O.SetDiameterMsg:return Object.assign({},e,{diameterPx:Object(d.n)(.1,500,t.diameterPx)});case O.SetSoftnessMsg:return Object.assign({},e,{softness:Object(d.n)(0,1,t.softnessPct)});case O.SetOpacityMsg:return Object.assign({},e,{flowPct:Object(d.n)(.01,1,t.opacityPct)});case O.SetSpacingMsg:return Object.assign({},e,{spacingPct:Object(d.n)(.01,1,t.spacingPct)});case O.SetPressureAffectsOpacityMsg:return Object.assign({},e,{pressureAffectsOpacity:t.pressureAffectsOpacity});case O.SetPressureAffectsSizeMsg:return Object.assign({},e,{pressureAffectsSize:t.pressureAffectsSize});case O.SetDelayMsg:return Object.assign({},e,{delay:g(Object(d.n)(0,500,t.delayMs))});default:throw{"unexpected message":t}}}function ee(e,t,n){return[{interpState:b(ne(t,n)),delayState:y(n.time,J(0,n))},te(t,n)]}function te(e,t){return{alpha:e.flowPct*t.pressure,color:I.RgbLinear.Black,position:new d.i(t.x,t.y),rotation:0,scaledDiameter:e.diameterPx*t.pressure}}function ne(e,t){return{alpha:e.flowPct*t.pressure,color:I.RgbLinear.Black,position:new d.i(t.x,t.y),pressure:t.pressure,rotation:0}}!function(e){e[e.SetZoomMsg=0]="SetZoomMsg",e[e.SetOffsetMsg=1]="SetOffsetMsg",e[e.SetRotationMsg=2]="SetRotationMsg"}(R||(R={}));class re{constructor(e){this.zoomPct=e,this.type=R.SetZoomMsg}}class se{constructor(e,t){this.offsetX=e,this.offsetY=t,this.type=R.SetOffsetMsg}}class oe{constructor(e){this.rotationTurns=e,this.type=R.SetRotationMsg}}class ie{constructor(e){this.sendMessage=e,this.setRotation=e=>{this.sendMessage(new oe(e))},this.setOffset=(e,t)=>{this.sendMessage(new se(e,t))},this.setZoom=e=>{this.sendMessage(new re(e))}}}class ce{constructor(e,t,n,r){this.offsetX=e,this.offsetY=t,this.zoomPct=Math.max(.01,n),this.rotateTurns=r}update(e){switch(e.type){case R.SetZoomMsg:return new ce(this.offsetX,this.offsetY,e.zoomPct,this.rotateTurns);case R.SetOffsetMsg:return new ce(e.offsetX,e.offsetY,this.zoomPct,this.rotateTurns);case R.SetRotationMsg:return new ce(this.offsetX,this.offsetY,this.zoomPct,e.rotationTurns);default:throw{"unexpected msg":e}}}zoomUpdate(e,t){let n=(t.x-e.clickPoint.x)/500;n=n>=0?n**2:-((-n)**2);const r=e.originalScale+n;return new ce(this.offsetX,this.offsetY,Math.min(5e3,r),this.rotateTurns)}rotateUpdate(e,t){throw"todo: should be turns, not rad"}moveUpdate(e,t){const n=t.x-e.prevPoint.x,r=t.y-e.prevPoint.y;return new ce(this.offsetX+n,this.offsetY+r,this.zoomPct,this.rotateTurns)}}ce.init=new ce(0,0,1,0);var ae,ue,le,fe=n(4);!function(e){e[e.SetToolMsg=0]="SetToolMsg",e[e.BrushMsg=1]="BrushMsg",e[e.EraserMsg=2]="EraserMsg",e[e.CameraMsg=3]="CameraMsg"}(ae||(ae={}));class he{constructor(e){this.subType=e,this.type=ae.SetToolMsg}}class de{constructor(e){this.msg=e,this.type=ae.BrushMsg}}class be{constructor(e){this.msg=e,this.type=ae.EraserMsg}}class pe{constructor(e){this.msg=e,this.type=ae.CameraMsg}}class ve{constructor(e){this.sendMessage=e,this.setTool=e=>{this.sendMessage(new he(e))},this.brush=new P(t=>e(new de(t))),this.eraser=new K(t=>e(new be(t))),this.camera=new ie(t=>e(new pe(t)))}}!function(e){e[e.Brush=0]="Brush",e[e.Eraser=1]="Eraser",e[e.Move=2]="Move",e[e.Zoom=3]="Zoom",e[e.Rotate=4]="Rotate"}(ue||(ue={}));class ge{constructor(e){this.state=e,this.type=ue.Brush}}class me{constructor(e){this.state=e,this.type=ue.Eraser}}class ye{constructor(e){this.state=e,this.type=ue.Move}}class Te{constructor(e){this.state=e,this.type=ue.Zoom}}class _e{constructor(e){this.state=e,this.type=ue.Rotate}}function we(){return new ge(null)}function xe(e,t){switch(t.type){case ae.SetToolMsg:switch(t.subType){case ue.Brush:return Object.assign({},e,{current:ue.Brush});case ue.Eraser:return Object.assign({},e,{current:ue.Eraser});case ue.Move:return Object.assign({},e,{current:ue.Move});case ue.Zoom:return Object.assign({},e,{current:ue.Zoom});case ue.Rotate:return Object.assign({},e,{current:ue.Rotate});default:throw{"unexpected tool type: ":t.type}}case ae.BrushMsg:return Object.assign({},e,{brush:B(e.brush,t.msg)});case ae.EraserMsg:return Object.assign({},e,{eraser:Q(e.eraser,t.msg)});case ae.CameraMsg:return Object.assign({},e,{camera:e.camera.update(t.msg)});default:throw{"unexpected msg":t}}}function Oe(e,t){if(t.type===e.current)return t;switch(e.current){case ue.Brush:return we();case ue.Eraser:return new me(null);case ue.Move:return new ye(null);case ue.Rotate:return new _e(null);case ue.Zoom:return new Te(null);default:e.current;throw{"Unknown tool type: ":e.current}}}function Re(e,t,n){const r=Oe(e,t);switch(r.type){case ue.Brush:{const[t,s]=function(e,t,n,r){if(null===n){const n=z(e,t,r[0]);return[n[0],[n[1]]]}{let e=n.interpState,s=[],o=n.delayState;for(let n=0;n<r.length;n++){const i=r[n],c=D(0,i),a=T(t.delay,o,i.time,c),u=p(t,e,U(t,a[1]));o=a[0],e=u[0],s=s.concat(u[1])}return[{delayState:o,interpState:e},s]}}(e.camera,e.brush,r.state,n);return[e,new ge(t),s]}case ue.Eraser:{const[t,s]=function(e,t,n,r){if(null===n){const e=ee(0,t,r[0]);return[e[0],[e[1]]]}{let e=n.interpState,s=[],o=n.delayState;for(let n=0;n<r.length;n++){const i=J(0,r[n]),c=T(t.delay,o,r[n].time,i),a=p(t,e,ne(t,c[1]));o=c[0],e=a[0],s=s.concat(a[1])}return[{delayState:o,interpState:e},s]}}(e.camera,e.eraser,r.state,n);return[e,new me(t),s]}case ue.Move:{if(null===r.state)return[e,r,[]];const t=n[n.length-1],s=e.camera.moveUpdate(r.state,t),o={clickPoint:r.state.clickPoint,prevPoint:t,originalScale:r.state.originalScale};return[Object.assign({},e,{camera:s}),new ye(o),[]]}case ue.Zoom:{if(null===r.state)return[e,r,[]];const t=n[n.length-1],s=e.camera.zoomUpdate(r.state,t),o={clickPoint:r.state.clickPoint,prevPoint:t,originalScale:r.state.originalScale};return[Object.assign({},e,{camera:s}),new Te(o),[]]}case ue.Rotate:{if(null===r.state)return[e,r,[]];const t=n[n.length-1],s=e.camera.rotateUpdate(r.state,t),o={clickPoint:r.state.clickPoint,prevPoint:t,originalScale:r.state.originalScale};return[Object.assign({},e,{camera:s}),new _e(o),[]]}default:throw{"unxpected state":r}}}function Ie(e,t,n){const r=Oe(e,t);switch(r.type){case ue.Brush:{const[t,s]=function(e,t,n){if(null===t)return[null,[]];const[r,s]=_(e.delay,t.delayState,n),[o,i]=p(e,t.interpState,U(e,s));return[{delayState:r,interpState:o},i]}(e.brush,r.state,n);return t===r.state&&0===s.length?[r,s]:[new ge(t),s]}case ue.Eraser:{const[t,s]=function(e,t,n){if(null===t||e.delay.duration<0)return[null,[]];const[r,s]=_(e.delay,t.delayState,n),[o,i]=p(e,t.interpState,ne(e,s));return[{delayState:r,interpState:o},i]}(e.eraser,r.state,n);return t===r.state&&0===s.length?[r,s]:[new me(t),s]}default:return[r,[]]}}function Ee(e){switch(e.current){case ue.Brush:return fe.c.Mode.Normal;case ue.Eraser:return fe.c.Mode.Erase;default:return fe.c.Mode.Normal}}function Ae(e){switch(e.current){case ue.Brush:return e.brush.softness;case ue.Eraser:return e.eraser.softness;default:return 0}}!function(e){e[e.BrushState=0]="BrushState",e[e.EraserState=1]="EraserState",e[e.MoveState=2]="MoveState",e[e.ZoomState=3]="ZoomState",e[e.RotateState=4]="RotateState"}(le||(le={}));var je=n(11),Se=n(47),Le=n(37),Me=n(3);const ke=Object(r.d)(e=>{const t=e.messageSender,n=e.tool;function r(e){const n=I.Rgb.fromCss(e);null!==n&&t.setColor(I.rgbToHsluv(n))}return Object(Me.l)(Object(l.e)(Le.detailsContainer,a.a,[Object(l.e)(a.a,{style:{margin:"0.5rem 0"}},Object(Me.g)({choices:n.colorMode,show:d.o,onSelect:t.setColorMode})),Object(Me.b)({color:n.color,colorType:n.colorMode.focus,onChange:t.setColor}),Object(l.e)(a.a,{style:{margin:"0.5rem 0",width:"100%"}},Object(Me.a)({color:n.color,colorSecondary:n.colorSecondary,onClick:t.swapColorFrom})),Object(l.e)(a.a,{style:{margin:"0.5rem 0"}},Object(je.a)(Object(Se.e)(e=>r(e.target.value)),Object(je.a)(Object(Se.b)(e=>r(e.target.value)),Object(l.f)(Le.textInput,{type:"text",style:{width:"100%"},value:Object(l.b)(n.color.toStyle())})))),Object(Me.f)({label:"Size",value:n.diameterPx.toFixed(1)+"px",children:Object(Me.k)({percentage:n.diameterPx/500,onChange:e=>t.setDiameter(500*e)})}),Object(Me.f)({label:"Softness",value:n.softness.toFixed(2),children:Object(Me.k)({percentage:n.softness,onChange:t.setSoftness})}),Object(Me.f)({label:"Flow",value:n.flowPct.toFixed(2),children:Object(Me.k)({percentage:n.flowPct,onChange:t.setOpacity})}),Object(Me.f)({label:"Spacing",value:n.spacingPct.toFixed(2)+"%",children:Object(Me.k)({percentage:n.spacingPct,onChange:t.setSpacing})}),Ge({color:n.color,colorType:n.colorMode.focus,sender:t}),Object(Me.e)({label:"Pressure-Opacity",children:Object(Me.m)({checked:n.pressureAffectsOpacity,onCheck:t.setPressureAffectsOpacity})}),Object(Me.e)({label:"Pressure-Size",children:Object(Me.m)({checked:n.pressureAffectsSize,onCheck:t.setPressureAffectsSize})}),Object(Me.f)({label:"Delay",value:n.delay.duration.toFixed(0)+"ms",children:Object(Me.k)({percentage:n.delay.duration/500,onChange:e=>t.setDelay(500*e)})})]))},h.a);function Ge({sender:e,color:t,colorType:n}){switch(n){case d.a.Hsluv:return function(e,t){return[Object(Me.f)({label:"Hue",value:t.h.toFixed(2),children:Object(Me.k)({percentage:t.h/360,onChange:n=>e.setColor(t.with({h:360*n}))})}),Object(Me.f)({label:"Saturation",value:t.s.toFixed(2),children:Object(Me.k)({percentage:t.s/100,onChange:n=>e.setColor(t.with({s:100*n}))})}),Object(Me.f)({label:"Luminosity",value:t.l.toFixed(2),children:Object(Me.k)({percentage:t.l/100,onChange:n=>e.setColor(t.with({l:100*n}))})})]}(e,t);case d.a.Hsv:return function(e,t){return[Object(Me.f)({label:"Hue",value:t.h.toFixed(2),children:Object(Me.k)({percentage:t.h,onChange:n=>e.setColor(I.rgbToHsluv(t.with({h:n}).toRgb()))})}),Object(Me.f)({label:"Saturation",value:t.s.toFixed(2),children:Object(Me.k)({percentage:t.s,onChange:n=>e.setColor(I.rgbToHsluv(t.with({s:n}).toRgb()))})}),Object(Me.f)({label:"Value",value:t.v.toFixed(2),children:Object(Me.k)({percentage:t.v,onChange:n=>e.setColor(I.rgbToHsluv(t.with({v:n}).toRgb()))})})]}(e,I.rgbToHsv(t.toRgb()));default:throw{"unexpected color type":n}}}var Ce=n(43);const Fe=Object(r.d)(e=>{const t=e.messageSender,n=e.tool;return Object(Me.l)(Object(l.e)(Ce.detailsContainer,a.a,[Object(Me.f)({label:"Size",value:n.diameterPx.toFixed(1)+"px",children:Object(Me.k)({percentage:n.diameterPx/500,onChange:e=>t.setDiameter(500*e)})}),Object(Me.f)({label:"Softness",value:n.softness.toFixed(2),children:Object(Me.k)({percentage:n.softness,onChange:t.setSoftness})}),Object(Me.f)({label:"Flow",value:n.flowPct.toFixed(2),children:Object(Me.k)({percentage:n.flowPct,onChange:t.setOpacity})}),Object(Me.f)({label:"Spacing",value:n.spacingPct.toFixed(2)+"%",children:Object(Me.k)({percentage:n.spacingPct,onChange:t.setSpacing})}),Object(Me.e)({label:"Pressure-Opacity",children:Object(Me.m)({checked:n.pressureAffectsOpacity,onCheck:t.setPressureAffectsOpacity})}),Object(Me.e)({label:"Pressure-Size",children:Object(Me.m)({checked:n.pressureAffectsSize,onCheck:t.setPressureAffectsSize})}),Object(Me.f)({label:"Delay",value:n.delay.duration.toFixed(0)+"ms",children:Object(Me.k)({percentage:n.delay.duration/500,onChange:e=>t.setDelay(500*e)})})]))},h.a);var Ve=n(40);const Pe=Object(r.d)(e=>{const t=e.tool.current,n=e.msgSender.setTool;return Object(l.e)(Ve.toolBarContainer,{style:{"z-index":1}},[Object(l.e)(Me.n+" "+Ve.leftBar,a.a,[Object(Me.j)({isDown:t===ue.Brush,onClick:()=>n(ue.Brush),children:Me.d.brush24px}),Object(Me.j)({isDown:t===ue.Eraser,onClick:()=>n(ue.Eraser),children:Me.d.edit24px}),Object(Me.j)({isDown:t===ue.Zoom,onClick:()=>n(ue.Zoom),children:Me.d.search24px})]),e.transientState.isDetailsExpanded?(()=>{switch(t){case ue.Brush:return ke({messageSender:e.msgSender.brush,tool:e.tool.brush});case ue.Eraser:return Fe({messageSender:e.msgSender.eraser,tool:e.tool.eraser});default:return null}})():null])},h.a);class Be{nextInt(){return[this.asInt(),this.step()]}nextFloat(){return[this.asInt()/4294967295,this.step()]}next2Floats(){const[e,t]=this.nextFloat(),[n,r]=t.nextFloat();return[e,n,r]}next3Floats(){const[e,t]=this.nextFloat(),[n,r]=t.nextFloat(),[s,o]=r.nextFloat();return[e,n,s,o]}}class ze extends Be{constructor(e,t,n,r,s){super(),this.a=e,this.b=t,this.c=n,this.d=r,this.value=s}static create(e){let t=new ze(e,0,0,0,null);for(let e=0;e<32;e++)t=t.step();return t}asInt(){return this.force().asInt}step(){return this.force().next}display(){return`Xorshift 128 (${this.a}, ${this.b}, ${this.c}, ${this.d})`}force(){if(null===this.value){const e=this.a;let t=this.d;t^=t<<11,t^=t>>>8,t^=e,t^=e>>>19,this.value={asInt:t>>>0,next:new ze(t,e,this.b,this.c,null)}}return this.value}}var De;!function(e){e.always=function(e){return t=>[e,t]},e.bool=function(e){const[t,n]=e.nextFloat();return[t<.5,n]},e.int=function(e,t){return e|=0,t|=0,n=>(function(e,t,n){const[r,s]=n.nextFloat();return[r*(t-e)+e,s]})(e,t,n)},e.float=function(e,t){return n=>(function(e,t,n){const[r,s]=n.nextFloat();return[r*(t-e)+e,s]})(e,t,n)},e.t2=function(e,t){return n=>(function(e,t,n){const[r,s]=e(n),[o,i]=t(s);return[[r,o],i]})(e,t,n)},e.t3=function(e,t,n){return r=>(function(e,t,n,r){const[s,o]=e(r),[i,c]=t(o),[a,u]=n(c);return[[s,i,a],u]})(e,t,n,r)},e.array=function(e,t){return n=>(function(e,t,n){const r=new Array(e);for(let s=0;s<e;s++){const[e,o]=t(n);r[s]=e,n=o}return[r,n]})(e,t,n)},e.object=function(e){return t=>(function(e,t){const n={};for(const r in e){const[s,o]=e[r](t);n[r]=s,t=o}return[n,t]})(e,t)},e.map=function(e,t){return n=>(function(e,t,n){const[r,s]=e(n);return[t(r),s]})(e,t,n)},e.map2=function(e,t,n){return r=>(function(e,t,n,r){const[s,o]=e(r),[i,c]=t(o);return[n(s,i),c]})(e,t,n,r)},e.map3=function(e,t,n,r){return s=>(function(e,t,n,r,s){const[o,i]=e(s),[c,a]=t(i),[u,l]=n(a);return[r(o,c,u),l]})(e,t,n,r,s)},e.map4=function(e,t,n,r,s){return o=>(function(e,t,n,r,s,o){const[i,c]=e(o),[a,u]=t(c),[l,f]=n(u),[h,d]=r(f);return[s(i,a,l,h),d]})(e,t,n,r,s,o)},e.andThen=function(e,t){return n=>(function(e,t,n){const[r,s]=e(n);return t(r)(s)})(e,t,n)},e.lazy=function(e){let t=null;return n=>(null===t&&(t=e()),t(n))}}(De||(De={}));const Ne={"--color-primary":e=>e.color.primary.toStyle(),"--color-primaryLight":e=>e.color.primaryLight.toStyle(),"--color-primaryDark":e=>e.color.primaryDark.toStyle(),"--color-secondary":e=>e.color.secondary.toStyle(),"--color-secondaryLight":e=>e.color.secondaryLight.toStyle(),"--color-secondaryDark":e=>e.color.secondaryDark.toStyle(),"--color-onPrimary":e=>e.color.onPrimary.toStyle(),"--color-onSecondary":e=>e.color.onSecondary.toStyle(),"--color-onSurface":e=>e.color.onSurface.toStyle(),"--color-surface":e=>e.color.surface.toStyle(),"--color-background":e=>e.color.background.toStyle(),"--shadows-button":e=>e.shadows.button,"--shadows-menu":e=>e.shadows.menu,"--shadows-surface":e=>e.shadows.surface,"--fonts-monospace":e=>e.fonts.monospace,"--fonts-normal":e=>e.fonts.normal};const Ue=(e,t)=>De.map3(De.float(0,360),De.float(0,e),De.always(t),(e,t,n)=>new I.Hsluv(e,t,n)),He=De.object({primary:Ue(100,80),primaryLight:Ue(100,80),primaryDark:Ue(100,80),secondary:Ue(100,77),secondaryLight:Ue(100,77),secondaryDark:Ue(100,77),background:Ue(20,46),surface:Ue(35,38),onPrimary:Ue(100,0),onSecondary:Ue(100,0),onSurface:Ue(100,100)}),We=De.always({button:"0 1px 5px 0 rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12)",surface:"0 1px 5px 0 rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12)",menu:"2px 2px 2px rgba(0, 0, 0, 0.45), 0 5px 8px 0 rgba(0, 0, 0, 0.3)"}),Xe=De.always({normal:'"Helvetica", "Arial", sans-serif',monospace:'"Courier New", Courier, monospace'}),Ye=De.object({color:He,shadows:We,fonts:Xe});var qe=n(15),Ze=n.n(qe);const $e=Object(r.d)(({layers:e,sender:t})=>{const n=e.layers.children,r=e.current();return Object(l.e)(Ze.a.layersWrapper,a.a,[Object(Me.l)(Object(l.e)(Ze.a.layersControlsWrapper,a.a,[Object(Me.i)({spacing:"0.25rem",children:[Object(Me.c)({onClick:()=>t.newLayer(r.id),title:"New layer",content:"New"}),Object(Me.c)({onClick:()=>t.removeLayer(r.id),title:"Delete layer",content:"Delete"})]}),Object(Me.e)({label:"Hidden",children:Object(Me.m)({checked:r.isHidden,onCheck:e=>t.setHidden(r.id,e)})}),Object(Me.f)({label:"Opacity",value:r.opacity.toFixed(2),children:Object(Me.k)({percentage:r.opacity,onChange:e=>t.setOpacity(r.id,e)})})])),Object(l.e)(Ze.a.layersListWrapper,a.a,n.map(e=>(function(e){const{selectedId:t,layer:n}=e,r=t===n.id?Ze.a.selectedLayerWrapper:Ze.a.unselectedLayerWrapper;return Object(je.a)(Object(Se.c)(()=>e.onClick(n.id)),Object(l.e)(r,a.a,Object(Me.l)([Object(l.e)(Ze.a.layerLeft),Object(l.e)(Ze.a.layerRight,a.a,[Object(l.e)(Ze.a.layerName,a.a,""!==n.name?n.name:"Layer "+n.id),Object(l.e)(Ze.a.layerOpacity,a.a,n.isHidden?"Hidden":Object(l.i)(a.a,a.a,[Object(l.i)(a.a,a.a,"Opacity: "),Object(l.i)(a.a,a.a,n.opacity.toFixed(2))]))])])))})({layer:e,selectedId:r.id,onClick:e=>t.selectLayer(e)})))])},h.a);function Ke(e,t){return void 0!==window.PointerEvent?function(e,t){const n=e=>{if(1===e.button||2===e.button)return;const n=performance.now();t.click(tt(n,e,e))},r=e=>{const n=performance.now();t.release(tt(n,e,e))},s=e=>{const n=performance.now();t.move(nt(n,e)),e.pressure>0&&t.drag(nt(n,e))};return window.addEventListener("pointerdown",Qe),e.addEventListener("pointerdown",n),window.addEventListener("pointerup",r),window.addEventListener("pointermove",s),()=>{window.removeEventListener("pointerdown",Qe),e.removeEventListener("pointerdown",n),window.removeEventListener("pointerup",r),window.removeEventListener("pointermove",s)}}(e,t):function(e,t){let n=!1;const r=e=>{if(1===e.button||2===e.button)return;const r=performance.now();t.click(rt(r,e,!1)),n=!0},s=e=>{const r=performance.now();t.release(rt(r,e,!0)),n=!1},o=e=>{const r=performance.now();t.move([rt(r,e,!1)]),n&&t.drag([rt(r,e,!1)])};return e.addEventListener("mousedown",r),window.addEventListener("mouseup",s),window.addEventListener("mousemove",o),()=>{e.removeEventListener("mousedown",r),window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",o)}}(e,t)}const Je={};function Qe(e){.5!==e.pressure&&(Je[e.pointerId]||(Je[e.pointerId]=!0))}const et=(()=>void 0===PointerEvent.prototype.getCoalescedEvents?e=>[e]:e=>{return e.getCoalescedEvents()})();function tt(e,t,n){return{x:t.x,y:t.y,pressure:(r=n,Je[r.pointerId]?r.pressure:.5===r.pressure?1:r.pressure),shift:t.shiftKey,alt:t.altKey,ctrl:t.ctrlKey,time:e};var r}function nt(e,t){const n=et(t),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=tt(e,n[s],t);return r}function rt(e,t,n){return{x:t.x,y:t.y,pressure:n?0:1,shift:t.shiftKey,alt:t.altKey,ctrl:t.ctrlKey,time:e}}class st{constructor(e,t,n,r){this.id=e,this.name=t,this.opacity=n,this.isHidden=r}static init(e){return new st(e,"",1,!1)}get isLeaf(){return!0}with(e){const t=Object(d.s)(e.name,this.name),n=Object(d.s)(e.opacity,this.opacity),r=Object(d.s)(e.isHidden,this.isHidden);return new st(this.id,t,n,r)}}class ot{constructor(e,t,n,r,s){this.id=e,this.name=t,this.opacity=n,this.isHidden=r,this.children=s}static init(e){return new ot(e,"",1,!1,[])}get isLeaf(){return!1}with(e){return new ot(this.id,Object(d.s)(e.name,this.name),Object(d.s)(e.opacity,this.opacity),Object(d.s)(e.isHidden,this.isHidden),this.children)}withChildren(e){return new ot(this.id,this.name,this.opacity,this.isHidden,e)}get(e){const t=e.head,n=this.children[t];if(e.tail.isNonEmpty()){if(n.isLeaf)throw"Invariant violation";return n.get(e.tail)}return n}getWithContext(e,t){const n=e.head,r=this.children[n];if(e.tail.isNonEmpty()){if(r.isLeaf)throw"Invariant violation";return r.getWithContext(e.tail,this.isHidden?0:t*this.opacity)}return{id:r.id,name:r.name,opacity:r.isHidden?0:t*r.opacity}}findPath(e){const t=this.children;for(let n=0;n<this.children.length;n++){const r=t[n];if(r.isLeaf){if(r.id===e)return w.empty().cons(n)}else{const t=r.findPath(e);if(null!==t)return t.cons(n)}}return null}insert(e,t){const n=e.head,r=this.children[n];if(e.tail.isNonEmpty()){if(r.isLeaf)throw"Invariant violation";const s=r.insert(e.tail,t),o=Object(d.m)(this.children,n,s);return this.withChildren(o)}return this.withChildren(Object(d.k)(this.children,n,t))}remove(e){const t=e.head,n=this.children[t];if(e.tail.isNonEmpty()){if(n.isLeaf)throw"Invariant violation";const[r,s]=n.remove(e.tail),o=Object(d.m)(this.children,t,r);return[this.withChildren(o),s.cons(t)]}{const n=this.withChildren(Object(d.l)(this.children,t));if(0===n.children.length)return[n,w.empty()];const r=this.children.length===t+1?t-1:t;return[n,t===r?e:w.NonEmpty.of(r)]}}update(e,t){const n=e.head,r=this.children[n];if(e.tail.isNonEmpty()){if(r.isLeaf)throw"Invariant violation";const s=r.update(e.tail,t),o=Object(d.m)(this.children,n,s);return this.withChildren(o)}{const e=t(r),s=Object(d.m)(this.children,n,e);return this.withChildren(s)}}collectLeaves(e,t){const n=this.children;for(let r=0;r<n.length;r++){const s=n[r],o=s.isHidden?0:t*s.opacity;s.isLeaf?e.push({id:s.id,name:s.name,opacity:o}):s.collectLeaves(e,o)}}}var it;!function(e){e[e.NewLayerMsg=0]="NewLayerMsg",e[e.RemoveMsg=1]="RemoveMsg",e[e.SelectMsg=2]="SelectMsg",e[e.SetOpacityMsg=3]="SetOpacityMsg",e[e.SetHiddenMsg=4]="SetHiddenMsg"}(it||(it={}));class ct{constructor(e){this.id=e,this.type=it.NewLayerMsg}}class at{constructor(e){this.id=e,this.type=it.RemoveMsg}}class ut{constructor(e){this.id=e,this.type=it.SelectMsg}}class lt{constructor(e,t){this.id=e,this.opacity=t,this.type=it.SetOpacityMsg}}class ft{constructor(e,t){this.id=e,this.isHidden=t,this.type=it.SetHiddenMsg}}class ht{constructor(e){this.sendMessage=e,this.newLayer=e=>{this.sendMessage(new ct(e))},this.removeLayer=e=>{this.sendMessage(new at(e))},this.selectLayer=e=>{this.sendMessage(new ut(e))},this.setOpacity=(e,t)=>{this.sendMessage(new lt(e,t))},this.setHidden=(e,t)=>{this.sendMessage(new ft(e,t))}}}class dt{constructor(e,t,n){this.getNextLayerId=e,this.layers=t,this.selectedPath=n}static init(){const e=(()=>{let e=1;return()=>e++})(),t=st.init(e()),n=ot.init(e()).withChildren([t]);return new dt(e,n,w.empty().cons(0))}current(){return this.layers.get(this.selectedPath)}update(e){switch(e.type){case it.NewLayerMsg:return this.current().id===e.id?this.newLayer():this;case it.RemoveMsg:return this.current().id===e.id?this.removeCurrent():this;case it.SelectMsg:return this.current().id===e.id?this:this.select(e.id);case it.SetOpacityMsg:{const{id:t,opacity:n}=e;return this.current().id===t?this.updateCurrent(e=>e.with({opacity:n})):this}case it.SetHiddenMsg:{const{id:t,isHidden:n}=e;return this.current().id===t?this.updateCurrent(e=>e.with({isHidden:n})):this}default:throw{"unexpected msg":e}}}split(){const e=this.layers.children,t=this.selectedPath.head,n=[],r=[];for(let r=0;r<t;r++){const t=e[r];t.isLeaf?n.push({id:t.id,name:t.name,opacity:1*t.opacity}):t.collectLeaves(n,1)}for(let t=this.selectedPath.head+1;t<e.length;t++){const n=e[t];n.isLeaf?r.push({id:n.id,name:n.name,opacity:1*n.opacity}):n.collectLeaves(r,1)}const s=this.layers.get(this.selectedPath);return s.isLeaf?{above:n,current:this.layers.getWithContext(this.selectedPath,1),below:r}:(s.collectLeaves(r,1),{above:n,current:null,below:r})}select(e){const t=this.layers.findPath(e);return null===t?this:new dt(this.getNextLayerId,this.layers,t)}newLayer(){const e=this.layers.insert(this.selectedPath,st.init(this.getNextLayerId()));return new dt(this.getNextLayerId,e,this.selectedPath)}removeCurrent(){const[e,t]=this.layers.remove(this.selectedPath);if(t.isNonEmpty())return new dt(this.getNextLayerId,e,t);const n=this.selectedPath.head,r=e.children.length<=n?n:n-1;return new dt(this.getNextLayerId,e,w.NonEmpty.of(r))}updateCurrent(e){return new dt(this.getNextLayerId,this.layers.update(this.selectedPath,e),this.selectedPath)}}const bt="\nprecision highp float;\n\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_tex_coords;\n\nvoid main() {\n    vec2 pos = a_position / u_resolution;\n    pos.y = 1.0 - pos.y;\n    v_tex_coords = pos;\n    pos = pos * 2.0;\n    pos = pos - 1.0;\n    gl_Position = vec4(pos, 0.0, 1.0);\n    \n}\n",pt=`\nprecision highp float;\n\n${fe.e}\n\nvarying vec2 v_tex_coords;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    vec4 pixel = texture2D(u_texture, v_tex_coords);\n    gl_FragColor = vec4(from_linear(pixel.rgb), pixel.a);\n}\n`,vt=new fe.b([{name:"a_position",size:2,type:fe.a.Float}]),gt={u_resolution:fe.h.F2,u_texture:fe.h.I1};class mt{constructor(e,t,n){this.program=t,this.locations=n,this.capacity=1024,this.buffer=e.createBuffer(),this.array=new Float32Array(6*vt.size*this.capacity)}static create(e){const t=fe.i(e,bt,pt);if(null===t)return null;const n=fe.j(e,t,gt);return null===n?null:(vt.bindAttribLocations(e,t),new mt(e,t,n))}render(e,t){const{sfact:n,dfact:r}=fe.c.factorsNormal;e.blendFunc(n,r),e.useProgram(this.program),e.bindFramebuffer(e.FRAMEBUFFER,null),this.capacity<t.blocks.length&&(this.capacity=t.blocks.length,this.array=new Float32Array(6*vt.size*this.capacity));const s=this.array;let o=0;for(let e=0;e<t.blocks.length;e++){const{x0:n,y0:r,x1:i,y1:c}=t.blocks[e];s[o++]=n,s[o++]=r,s[o++]=n,s[o++]=c,s[o++]=i,s[o++]=r,s[o++]=n,s[o++]=c,s[o++]=i,s[o++]=r,s[o++]=i,s[o++]=c}e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,s,WebGLRenderingContext.DYNAMIC_DRAW),fe.k(e,this.locations,t.uniforms),vt.vertexAttrib(e),e.drawArrays(WebGLRenderingContext.TRIANGLES,0,6*t.blocks.length)}dispose(e){e.deleteBuffer(this.buffer),e.deleteProgram(this.program)}}const yt="\nprecision highp float;\n\nattribute vec2 a_position;\n\nvarying vec2 v_position;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0.0, 1.0);\n  \n  v_position = a_position;\n}\n",Tt="\nprecision highp float;\n\nvarying vec2 v_position;\n\nuniform float u_softness;\n\nvoid main() {\n  float radius = 1.0 - u_softness;\n  float dist = sqrt(dot(v_position, v_position));\n  float a = 1.0 - smoothstep(radius, radius + u_softness, dist);\n\n  gl_FragColor = vec4(vec3(0.0), (a));\n}\n",_t=new fe.b([{name:"a_position",size:2,type:fe.a.Float}]),wt={u_softness:fe.h.F1};class xt{constructor(e,t,n){this.program=t,this.locations=n,this.buffer=e.createBuffer();const r=new Float32Array(12);r[0]=-1,r[1]=-1,r[2]=-1,r[3]=1,r[4]=1,r[5]=-1,r[6]=-1,r[7]=1,r[8]=1,r[9]=-1,r[10]=1,r[11]=1,this.array=r}static create(e){const t=fe.i(e,yt,Tt);if(null===t)return null;const n=fe.j(e,t,wt);return null===n?null:(_t.bindAttribLocations(e,t),new xt(e,t,n))}generateBrushTexture(e,t){const{sfact:n,dfact:r}=fe.c.factorsNormal;e.blendFunc(n,r),e.useProgram(this.program),e.viewport(0,0,t.size.x,t.size.y),e.bindFramebuffer(e.FRAMEBUFFER,t.framebuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),fe.k(e,this.locations,t.uniforms),e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,this.array,WebGLRenderingContext.STATIC_DRAW),_t.vertexAttrib(e),e.drawArrays(WebGLRenderingContext.TRIANGLES,0,6)}dispose(e){e.deleteBuffer(this.buffer),e.deleteProgram(this.program)}}const Ot="\nprecision highp float;\n\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 v_tex_coords;\n\nvoid main() {\n    vec2 pos = a_position / u_resolution;\n    pos.y = 1.0 - pos.y;\n    pos = pos * 2.0;\n    pos = pos - 1.0;\n    gl_Position = vec4(pos, 0.0, 1.0);\n    \n    v_tex_coords = a_position / u_resolution;\n}\n",Rt="\nprecision highp float;\n\nvarying vec2 v_tex_coords;\n\nuniform sampler2D u_texture;\nuniform float u_opacity;\n\nvoid main() {\n    vec4 pixel = texture2D(u_texture, v_tex_coords);\n    gl_FragColor = pixel * u_opacity;\n}\n",It=new fe.b([{name:"a_position",size:2,type:fe.a.Float}]),Et={u_texture:fe.h.I1,u_resolution:fe.h.F2,u_opacity:fe.h.F1};class At{constructor(e,t,n){this.program=t,this.locations=n,this.capacity=1024,this.buffer=e.createBuffer(),this.array=new Float32Array(6*It.size*this.capacity)}static create(e){const t=fe.i(e,Ot,Rt);if(null===t)return null;const n=fe.j(e,t,Et);return null===n?null:(It.bindAttribLocations(e,t),new At(e,t,n))}render(e,t){if(null==t.framebuffer)throw"Framebuffer should be defined";const{sfact:n,dfact:r}=fe.c.factorsNormal;e.blendFunc(n,r),e.useProgram(this.program),e.bindFramebuffer(e.FRAMEBUFFER,t.framebuffer),this.capacity<t.blocks.length&&(this.capacity=t.blocks.length,this.array=new Float32Array(6*It.size*this.capacity));const s=this.array;let o=0;for(let e=0;e<t.blocks.length;e++){const{x0:n,y0:r,x1:i,y1:c}=t.blocks[e];s[o++]=n,s[o++]=r,s[o++]=n,s[o++]=c,s[o++]=i,s[o++]=r,s[o++]=n,s[o++]=c,s[o++]=i,s[o++]=r,s[o++]=i,s[o++]=c}e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,s,WebGLRenderingContext.DYNAMIC_DRAW),fe.k(e,this.locations,t.uniforms),It.vertexAttrib(e),e.drawArrays(WebGLRenderingContext.TRIANGLES,0,6*t.blocks.length)}dispose(e){e.deleteBuffer(this.buffer),e.deleteProgram(this.program)}}const jt="\nprecision highp float;\n\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvoid main() {\n    vec2 pos = a_position / u_resolution;\n    pos.y = 1.0 - pos.y;\n    pos = pos * 2.0;\n    pos = pos - 1.0;\n    gl_Position = vec4(pos, 0.0, 1.0);\n}\n",St="\nprecision highp float;\n\nuniform vec4 u_rgba;\n\nvoid main() {\n    gl_FragColor = u_rgba;\n}\n",Lt=new fe.b([{name:"a_position",size:2,type:fe.a.Float}]),Mt={u_resolution:fe.h.F2,u_rgba:fe.h.F4};class kt{constructor(e,t,n){this.program=t,this.locations=n,this.capacity=1024,this.buffer=e.createBuffer(),this.array=new Float32Array(6*Lt.size*this.capacity)}static create(e){const t=fe.i(e,jt,St);if(null===t)return null;const n=fe.j(e,t,Mt);return null===n?null:(Lt.bindAttribLocations(e,t),new kt(e,t,n))}render(e,t){if(null==t.framebuffer)throw"Framebuffer should be defined";const{sfact:n,dfact:r}=fe.c.factorsNormal;e.blendFunc(n,r),e.useProgram(this.program),e.bindFramebuffer(e.FRAMEBUFFER,t.framebuffer),this.capacity<t.blocks.length&&(this.capacity=t.blocks.length,this.array=new Float32Array(6*Lt.size*this.capacity));const s=this.array;let o=0;for(let e=0;e<t.blocks.length;e++){const{x0:n,y0:r,x1:i,y1:c}=t.blocks[e];s[o++]=n,s[o++]=r,s[o++]=n,s[o++]=c,s[o++]=i,s[o++]=r,s[o++]=n,s[o++]=c,s[o++]=i,s[o++]=r,s[o++]=i,s[o++]=c}e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,s,WebGLRenderingContext.DYNAMIC_DRAW),fe.k(e,this.locations,t.uniforms),Lt.vertexAttrib(e),e.drawArrays(WebGLRenderingContext.TRIANGLES,0,6*t.blocks.length)}dispose(e){e.deleteBuffer(this.buffer),e.deleteProgram(this.program)}}const Gt=5e3,Ct="\nprecision highp float;\n\nattribute vec4 a_color;\nattribute vec2 a_tex_coords;\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec4 v_color;\nvarying vec2 v_tex_coords;\n\nvoid main() {\n    vec2 pos = (a_position / u_resolution) * vec2(2.0, -2.0) + vec2(-1.0, 1.0);\n    gl_Position = vec4(pos, 0.0, 1.0);\n\n    v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n    v_tex_coords = a_tex_coords;\n}\n",Ft="\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_tex_coords;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n    float alpha = texture2D(u_texture, v_tex_coords).a;\n    gl_FragColor = v_color * alpha;\n}\n",Vt=new fe.b([{name:"a_color",size:4,type:fe.a.Float},{name:"a_tex_coords",size:2,type:fe.a.Float},{name:"a_position",size:2,type:fe.a.Float}]),Pt={u_resolution:fe.h.F2,u_texture:fe.h.I1};function Bt(){return{x0:Number.MAX_VALUE,y0:Number.MAX_VALUE,x1:Number.MIN_VALUE,y1:Number.MIN_VALUE}}class zt{constructor(e,t,n){this.program=t,this.locations=n;const r=6*Vt.size*Gt;this.buffer=e.createBuffer(),this.array=new Float32Array(r),this.offset=0,this.affectedArea=Bt()}static create(e){const t=fe.i(e,Ct,Ft);if(null===t)return null;const n=fe.j(e,t,Pt);return null===n?null:(Vt.bindAttribLocations(e,t),new zt(e,t,n))}get canFlush(){return this.offset>0}addPoints(e){const t=6*Vt.size*e.length+this.offset;for(;t>this.array.length;)this.array=Dt(this.array);const n=this.array,r=e.length;let s=this.offset;for(let t=0;t<r;t++)s=Nt(n,s,e[t],this.affectedArea);this.offset=s}getAffectedArea(){const{affectedArea:e}=this;return new d.j(e.x0,e.y0,e.x1,e.y1)}flush(e,t){e.useProgram(this.program);const n=this.array.subarray(0,this.offset),{sfact:r,dfact:s}=fe.c.getFactors(t.blendMode);e.blendFunc(r,s),e.bindBuffer(WebGLRenderingContext.ARRAY_BUFFER,this.buffer),e.bufferData(WebGLRenderingContext.ARRAY_BUFFER,n,WebGLRenderingContext.DYNAMIC_DRAW),fe.k(e,this.locations,t.uniforms),Vt.vertexAttrib(e);const o=Vt.getDrawCount(this.offset);e.drawArrays(WebGLRenderingContext.TRIANGLES,0,o),this.offset=0,this.affectedArea=Bt()}dispose(e){e.deleteBuffer(this.buffer),e.deleteProgram(this.program)}}function Dt(e){const t=new Float32Array(2*e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}function Nt(e,t,n,r){const s=n.position.x,o=n.position.y,i=.5*n.scaledDiameter,c=s-i,a=o-i,u=s+i,l=o+i;return t=Ut(e,t,n,0,0,c,a),t=Ut(e,t,n,1,0,u,a),t=Ut(e,t,n,0,1,c,l),t=Ut(e,t,n,1,1,u,l),t=Ut(e,t,n,0,1,c,l),t=Ut(e,t,n,1,0,u,a),c<r.x0&&(r.x0=c),a<r.y0&&(r.y0=a),u>r.x1&&(r.x1=u),l>r.y1&&(r.y1=l),t}function Ut(e,t,n,r,s,o,i){return e[t++]=n.color.r,e[t++]=n.color.g,e[t++]=n.color.b,e[t++]=n.alpha,e[t++]=r,e[t++]=s,e[t++]=o,e[t++]=i,t}const Ht=32,Wt=32;class Xt{constructor(e,t){this.x0=e*Ht,this.y0=t*Wt,this.x1=(e+1)*Ht,this.y1=(t+1)*Wt}eq(e){return this.x0===e.x0&&this.y0===e.y0}}class Yt{constructor(){this._frameBlocks=[],this._strokeBlocks=[]}getFrameBlocks(){return this._frameBlocks}getStrokeBlocks(){return this._strokeBlocks}addPoints(e){if(0===e.length)return;const t=this._frameBlocks;for(let n=0;n<e.length;n++){const r=e[n],s=r.scaledDiameter/2,o=r.position.x-s,i=r.position.y-s,c=r.position.x+s,a=r.position.y+s,u=o/Ht|0,l=c/Ht|0,f=a/Wt|0;for(let e=i/Wt|0;e<=f;e++)for(let n=u;n<=l;n++){const r=new Xt(n,e);let s=!1;for(let e=0;e<t.length;e++)if(t[e].eq(r)){s=!0;break}s||t.push(r)}}const n=this._strokeBlocks;for(let e=0;e<t.length;e++){const r=t[e];let s=!1;for(let e=0;e<n.length;e++)if(r.eq(n[e])){s=!0;break}s||n.push(r)}}strokeEnded(){this._frameBlocks.splice(0,this._frameBlocks.length,...this._strokeBlocks),this._strokeBlocks.length=0}afterFrame(){this._frameBlocks.length=0}}let qt=1;class Zt{constructor(e,t){this.id=qt++,this.texture=e,this.framebuffer=t}}function $t(e,t,n,r){const s=new Zt(e.createTexture(),e.createFramebuffer());t.push(s),Kt(e,n,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.x,r.y,0,e.RGBA,e.FLOAT,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,s.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s.texture,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(o){case e.FRAMEBUFFER_COMPLETE:case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:case e.FRAMEBUFFER_UNSUPPORTED:break;default:throw"Unexpected status: "+o}return s}function Kt(e,t,{texture:n,id:r}){for(let n=0;n<t.length;n++)if(t[n][0]===r)return e.activeTexture(e.TEXTURE0+n),n;for(let s=0;s<t.length;s++)if(null===t[s][0])return e.activeTexture(e.TEXTURE0+s),e.bindTexture(e.TEXTURE_2D,n),t[s]=[r,performance.now()],s;{let s=Number.MAX_VALUE,o=0;for(let e=0;e<t.length;e++){const n=t[e][1];n<s&&(s=n,o=e)}return e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,n),t[o]=[r,performance.now()],o}}function Jt(e,t){if(e.length!==t.length)return!0;for(let n=0;n<t.length;n++)if(e[n].id!==t[n].id)return!0;return!1}function Qt(e,t,{texture:n,id:r}){for(let n=0;n<t.length;n++)if(t[n][0]===r)return e.activeTexture(e.TEXTURE0+n),n;for(let s=0;s<t.length;s++)if(null===t[s][0])return e.activeTexture(e.TEXTURE0+s),e.bindTexture(e.TEXTURE_2D,n),t[s]=[r,performance.now()],s;{let s=Number.MAX_VALUE,o=0;for(let e=0;e<t.length;e++){const n=t[e][1];n<s&&(s=n,o=e)}return e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,n),t[o]=[r,performance.now()],o}}class en{constructor(e){this.gl=e.gl,this.brushTextureGenerator=e.brushTextureGenerator,this.textureRenderer=e.textureRenderer,this.clearBlocksRenderer=e.clearBlocksRenderer,this.outputRenderer=e.outputRenderer,this.drawpointBatch=e.drawpointBatch,this.allTextures=[],this.textureBindings=new Array(32).fill([null,0]),this.layerTextureMap=new Map,this.internalCanvasSize=e.resolution,this.stroke=null,this.renderBlocks=new Yt,this.prevLayers={above:[],below:[],current:null};{const e=new d.i(128,128);this.brushTexture=$t(this.gl,this.allTextures,this.textureBindings,e),this.brushTextureGenerator.generateBrushTexture(this.gl,{framebuffer:this.brushTexture.framebuffer,size:e,uniforms:{u_softness:0}})}this.outputTexture=$t(this.gl,this.allTextures,this.textureBindings,e.resolution);const t=this.outputTexture.framebuffer;this.combinedLayers={above:$t(this.gl,this.allTextures,this.textureBindings,e.resolution),below:$t(this.gl,this.allTextures,this.textureBindings,e.resolution),current:$t(this.gl,this.allTextures,this.textureBindings,e.resolution)},this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,t),this.gl.viewport(0,0,e.resolution.x,e.resolution.y),this.gl.clearColor(.6,.6,.6,1),this.gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.outputRenderer.render(this.gl,{uniforms:{u_resolution:e.resolution,u_texture:Kt(this.gl,this.textureBindings,this.outputTexture)},blocks:[{x0:0,y0:0,x1:e.resolution.x,y1:e.resolution.y}]})}addBrushPoints(e){this.drawpointBatch.addPoints(e),this.renderBlocks.addPoints(e)}endStroke(){!function(e){const{gl:t,stroke:n,prevLayers:r,internalCanvasSize:s}=e;if(null===n)return;if(null===r.current)return;t.viewport(0,0,e.internalCanvasSize.x,e.internalCanvasSize.y),e.textureRenderer.render(t,{framebuffer:e.combinedLayers.current.framebuffer,uniforms:{u_opacity:1,u_resolution:s,u_texture:Kt(e.gl,e.textureBindings,n)},blocks:e.renderBlocks.getStrokeBlocks()}),t.bindFramebuffer(t.FRAMEBUFFER,n.framebuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.renderBlocks.strokeEnded()}(this)}render(e){!function(e,{blendMode:t,nextLayers:n,resolution:r,brush:s}){const o=e.renderBlocks.getFrameBlocks();if(0===o.length)return;const{gl:i}=e;if(e.drawpointBatch.canFlush)if(null===n.current);else{let o=e.layerTextureMap.get(n.current.id);null==o&&(o=$t(e.gl,e.allTextures,e.textureBindings,e.internalCanvasSize),e.layerTextureMap.set(n.current.id,o));const{brushTexture:c}=e;e.brushTextureGenerator.generateBrushTexture(i,{framebuffer:c.framebuffer,size:new d.i(128,128),uniforms:{u_softness:Math.max(s.softness,1e-6)}}),i.viewport(0,0,r.x,r.y),i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer),e.drawpointBatch.flush(i,{blendMode:t,uniforms:{u_resolution:r,u_texture:Kt(e.gl,e.textureBindings,c)}})}const c=function(e,t){const n=t.above,r=t.below;let s=null,o=null;if(Jt(e.above,n)){s=[];for(let e=0;e<n.length;e++){const t=n[e];0!==t.opacity&&s.push(t)}}if(Jt(e.below,r)){o=[];for(let e=r.length-1;e>=0;e--){const t=r[e];0!==t.opacity&&o.push(t)}}return{above:s,below:o,current:t.current}}(e.prevLayers,n);!function(e){const{gl:t,allTextures:n,resolution:r,layersToRender:s,textureShader:o,textureBindings:i,layerTextureMap:c}=e,a=s.above,u=s.below,l=s.current;if(t.clearColor(0,0,0,0),null!==a){t.bindFramebuffer(t.FRAMEBUFFER,e.textureAbove.framebuffer),t.clear(t.COLOR_BUFFER_BIT);for(let s=0;s<a.length;s++){const u=a[s];let l=c.get(u.id);null==l&&(l=$t(t,n,i,r),c.set(u.id,l)),o.render(t,{blocks:[{x0:0,y0:0,x1:r.x,y1:r.y}],framebuffer:e.textureAbove.framebuffer,uniforms:{u_opacity:u.opacity,u_resolution:r,u_texture:Qt(t,i,l)}})}}if(null!==u){t.bindFramebuffer(t.FRAMEBUFFER,e.textureBelow.framebuffer),t.clear(t.COLOR_BUFFER_BIT);for(let s=0;s<u.length;s++){const a=u[s];let l=c.get(a.id);null==l&&(l=$t(t,n,i,r),c.set(a.id,l)),o.render(t,{blocks:[{x0:0,y0:0,x1:r.x,y1:r.y}],framebuffer:e.textureBelow.framebuffer,uniforms:{u_opacity:a.opacity,u_resolution:r,u_texture:Qt(t,i,l)}})}}if(null!==l){let s=c.get(l.id);null==s&&(s=$t(t,n,i,r),c.set(l.id,s)),t.bindFramebuffer(t.FRAMEBUFFER,e.textureCurrent.framebuffer),t.clear(t.COLOR_BUFFER_BIT),o.render(t,{blocks:[{x0:0,y0:0,x1:r.x,y1:r.y}],framebuffer:e.textureCurrent.framebuffer,uniforms:{u_opacity:l.opacity,u_resolution:r,u_texture:Qt(t,i,s)}})}}({gl:i,resolution:r,allTextures:e.allTextures,layerTextureMap:e.layerTextureMap,textureBindings:e.textureBindings,textureShader:e.textureRenderer,layersToRender:c,textureAbove:e.combinedLayers.above,textureBelow:e.combinedLayers.below,textureCurrent:e.combinedLayers.current});const a=e.outputTexture.framebuffer;if(null==a)throw"Out framebuffer should exist";i.bindFramebuffer(i.FRAMEBUFFER,a);{const t=new I.RgbLinear(.6,.6,.6);e.clearBlocksRenderer.render(i,{framebuffer:a,uniforms:{u_resolution:r,u_rgba:d.j.fromRgba(t,1)},blocks:o})}e.textureRenderer.render(i,{framebuffer:a,uniforms:{u_opacity:1,u_resolution:r,u_texture:Kt(e.gl,e.textureBindings,e.combinedLayers.below)},blocks:o}),null!==n.current&&e.textureRenderer.render(i,{framebuffer:a,uniforms:{u_opacity:n.current.opacity,u_resolution:r,u_texture:Kt(e.gl,e.textureBindings,e.combinedLayers.current)},blocks:o});e.textureRenderer.render(i,{framebuffer:a,uniforms:{u_opacity:1,u_resolution:r,u_texture:Kt(e.gl,e.textureBindings,e.combinedLayers.above)},blocks:o}),e.outputRenderer.render(i,{uniforms:{u_resolution:r,u_texture:Kt(e.gl,e.textureBindings,e.outputTexture)},blocks:o}),i.flush(),e.prevLayers=n,e.renderBlocks.afterFrame()}(this,e)}dispose(){const{gl:e}=this;this.brushTextureGenerator.dispose(e),this.textureRenderer.dispose(e),this.outputRenderer.dispose(e),this.drawpointBatch.dispose(e);for(const t of this.allTextures)e.deleteTexture(t.texture),t instanceof Zt&&e.deleteFramebuffer(t.framebuffer)}}var tn,nn;!function(e){e[e.OnFrame=0]="OnFrame",e[e.OnClick=1]="OnClick",e[e.OnRelease=2]="OnRelease",e[e.OnDrag=3]="OnDrag",e[e.RandomizeTheme=4]="RandomizeTheme",e[e.ToolMsg=5]="ToolMsg",e[e.LayersMsg=6]="LayersMsg"}(tn||(tn={}));class rn{constructor(e){this.ms=e,this.type=tn.OnFrame}}class sn{constructor(e){this.input=e,this.type=tn.OnClick}}class on{constructor(e){this.input=e,this.type=tn.OnRelease}}class cn{constructor(e){this.inputs=e,this.type=tn.OnDrag}}class an{constructor(){this.type=tn.RandomizeTheme}}class un{constructor(e){this.msg=e,this.type=tn.ToolMsg}}class ln{constructor(e){this.msg=e,this.type=tn.LayersMsg}}!function(e){e[e.NoOpEffect=0]="NoOpEffect",e[e.FrameEffect=1]="FrameEffect",e[e.BrushPointsEffect=2]="BrushPointsEffect",e[e.ReleaseEffect=3]="ReleaseEffect"}(nn||(nn={}));class fn{constructor(){this.type=nn.NoOpEffect}}fn.value=new fn;class hn{constructor(e,t){this.brushPoints=e,this.state=t,this.type=nn.FrameEffect}}class dn{constructor(e){this.brushPoints=e,this.type=nn.BrushPointsEffect}}class bn{constructor(e){this.brushPoints=e,this.type=nn.ReleaseEffect}}class pn{constructor(e){this.sendMessage=e,this.onFrame=e=>{this.sendMessage(new rn(e))},this.onClick=e=>{this.sendMessage(new sn(e))},this.onRelease=e=>{this.sendMessage(new on(e))},this.onDrag=e=>{if(0===e.length){throw{["Expected inputs be be 1 or greater"]:e}}this.sendMessage(new cn(e))},this.randomizeTheme=()=>{this.sendMessage(new an)},this.tool=new ve(t=>e(new un(t))),this.layer=new ht(t=>e(new ln(t)))}}function vn(e,t,n){const r=new d.i(n.x,n.y).subtract(e.offset).subtractScalars(t.offsetX,t.offsetY).subtract(e.halfResoution).multiplyScalar(1/t.zoomPct),{x:s,y:o}=Object(d.t)(-t.rotateTurns,d.i.zeroes,r).add(e.halfResoution);return{x:s,y:o,pressure:n.pressure,time:n.time,originalX:n.x,originalY:n.y}}function gn(e,t,n,r){switch(r.type){case tn.OnFrame:{const[e,s]=Ie(t.tool,n.tool,r.ms);return[t,{tool:e},new hn(s,t)]}case tn.OnClick:{const[s,o,i]=function(e,t,n){const r=Oe(e,t);switch(r.type){case ue.Brush:{const[t,r]=z(e.camera,e.brush,n);return[e,new ge(t),[r]]}case ue.Eraser:{const[t,r]=ee(e.camera,e.eraser,n);return[e,new me(t),[r]]}case ue.Move:{if(null!==r.state)return[e,r,[]];const t={clickPoint:n,prevPoint:n,originalScale:e.camera.zoomPct},s=e.camera.moveUpdate(t,n);return[Object.assign({},e,{camera:s}),new ye(t),[]]}case ue.Zoom:{if(null!==r.state)return[e,r,[]];const t={clickPoint:n,prevPoint:n,originalScale:e.camera.zoomPct},s=e.camera.zoomUpdate(t,n);return[Object.assign({},e,{camera:s}),new Te(t),[]]}case ue.Rotate:{if(null!==r.state)return[e,r,[]];const t={clickPoint:n,prevPoint:n,originalScale:e.camera.zoomPct},s=e.camera.rotateUpdate(t,n);return[Object.assign({},e,{camera:s}),new _e(t),[]]}default:throw{"unxpected state":r}}}(t.tool,n.tool,vn(e,t.tool.camera,r.input));return[Object.assign({},t,{hasPressedDown:!0,tool:s}),{tool:o},new dn(i)]}case tn.OnRelease:{const[s,o,i]=function(e,t,n){const r=Oe(e,t);switch(r.type){case ue.Brush:{const[t,n]=(e.camera,e.brush,r.state,[null,[]]);return[e,new ge(t),n]}case ue.Eraser:{const[t,n]=(e.camera,e.eraser,r.state,[null,[]]);return[e,new me(t),n]}case ue.Move:{if(null===r.state)return[e,r,[]];const t=e.camera.moveUpdate(r.state,n);return[Object.assign({},e,{camera:t}),new ye(null),[]]}case ue.Zoom:{if(null===r.state)return[e,r,[]];const t=e.camera.zoomUpdate(r.state,n);return[Object.assign({},e,{camera:t}),new Te(null),[]]}case ue.Rotate:{if(null===r.state)return[e,r,[]];const t=e.camera.rotateUpdate(r.state,n);return[Object.assign({},e,{camera:t}),new _e(null),[]]}default:throw{"unxpected state":r}}}(t.tool,n.tool,vn(e,t.tool.camera,r.input));return[Object.assign({},t,{hasPressedDown:!1,tool:s}),{tool:o},new bn(i)]}case tn.OnDrag:{if(!t.hasPressedDown)return[t,n,fn.value];const[s,o,i]=Re(t.tool,n.tool,function(e,t,n){const r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=vn(e,t,n[s]);return r}(e,t.tool.camera,r.inputs));return[Object.assign({},t,{tool:s}),{tool:o},new dn(i)]}case tn.RandomizeTheme:{const[e,r]=Ye(t.rng);return[Object.assign({},t,{rng:r,theme:e}),n,fn.value]}case tn.ToolMsg:return[Object.assign({},t,{tool:xe(t.tool,r.msg)}),n,fn.value];case tn.LayersMsg:return[Object.assign({},t,{layers:t.layers.update(r.msg)}),n,fn.value];default:throw{"unexpected msg":r}}}class mn{constructor(e,t,n,r){this.canvasElement=e,this.hooks=n,this.context=r,this.perfTracker=new d.e({maxSamples:50,onSamples:this.hooks.onStats}),this.splitLayers=t.layers.split()}static create(e,t,n){const r=function(e){const t=e.getContext("webgl",{antialias:!1,depth:!1,alpha:!1,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:!0,desynchronized:!0});if(null===t)return new d.b("Failed to initialize WebGL");const n=t.getContextAttributes();!n||n.desynchronized,t.getExtension("OES_texture_float_linear"),t.getExtension("OES_texture_float"),t.viewport(0,0,e.width,e.height),t.enable(WebGLRenderingContext.BLEND),t.disable(WebGLRenderingContext.DEPTH_TEST);const{sfact:r,dfact:s}=fe.c.factorsNormal;t.blendFunc(r,s);const o=zt.create(t);if(null===o){const e="Failed to initialize BrushShader";return new d.b(e)}const i=xt.create(t);if(null===i){const e="Failed to initialize BrushTextureGenerator";return new d.b(e)}const c=At.create(t);if(null===c){const e="Failed to initialize TextureShader";return new d.b(e)}const a=kt.create(t);if(null===a){const e="Failed to initialize ClearBlocksShader";return new d.b(e)}const u=mt.create(t);if(null===u){const e="Failed to initialize OutputShader";return new d.b(e)}t.viewport(0,0,e.width,e.height);const l=new en({gl:t,brushTextureGenerator:i,drawpointBatch:o,outputRenderer:u,textureRenderer:c,clearBlocksRenderer:a,resolution:new d.i(e.width,e.height)});return new d.d([l,t])}(e);return r.isOk()?new mn(e,t,n,r.value[0]):null}update(e){this.splitLayers=e.layers.split()}handle(e){switch(e.type){case nn.NoOpEffect:return;case nn.FrameEffect:{this.perfTracker.start(),this.context.addBrushPoints(e.brushPoints);const t=new d.i(this.canvasElement.width,this.canvasElement.height),n=e.state;return this.context.render({blendMode:Ee(n.tool),nextLayers:this.splitLayers,resolution:t,brush:{softness:Ae(n.tool)}}),void this.perfTracker.end()}case nn.BrushPointsEffect:return void this.context.addBrushPoints(e.brushPoints);case nn.ReleaseEffect:return this.context.addBrushPoints(e.brushPoints),void this.context.endStroke();default:throw{"unexpected effect":e}}}dispose(){this.context.dispose()}}n(45);var yn=n(44);const Tn=Object(r.d)(({camera:e,sender:t})=>Object(l.e)(yn.container,a.a,[Object(Me.f)({label:"Zoom",value:(100*e.zoomPct).toFixed(1)+"%",children:Object(Me.k)({percentage:e.zoomPct/4,onChange:e=>{t.setZoom(4*e)}})}),Object(Me.f)({label:"Rotate",value:(360*e.rotateTurns).toFixed(1)+" deg",children:Object(Me.k)({percentage:e.rotateTurns,onChange:e=>{t.setRotation(e)}})}),Object(Me.f)({label:"Offset X",value:e.offsetX.toFixed(0)+" px",children:Object(Me.k)({percentage:Object(d.n)(-5e3,5e3,(e.offsetX+2500)/5e3),onChange:n=>{t.setOffset(5e3*n-2500,e.offsetY)}})}),Object(Me.f)({label:"Offset Y",value:e.offsetY.toFixed(0)+" px",children:Object(Me.k)({percentage:Object(d.n)(-5e3,5e3,(e.offsetY+2500)/5e3),onChange:n=>{t.setOffset(e.offsetX,5e3*n-2500)}})})]),h.a);function _n(){return new d.i(document.documentElement.clientWidth,document.documentElement.clientHeight)}function wn(e){return new d.i(e.offsetLeft,e.offsetTop)}function xn({canvasOffset:e,canvasResolution:t}){return{resolution:t,halfResoution:t.multiplyScalar(.5),offset:e}}const On=Object(r.a)(e=>{const t=function(){const[e,t]=Ye(ze.create(145264772));return{rng:t,theme:e,tool:{brush:{diameterPx:15,softness:.4,flowPct:.3,colorMode:E.unsafeFromArray([d.a.Hsluv,d.a.Hsv]),color:new I.Hsluv(73,100,16),colorSecondary:new I.Hsluv(0,0,100),spacingPct:.05,pressureAffectsOpacity:!1,pressureAffectsSize:!0,delay:g(5)},eraser:{diameterPx:15,softness:.3,flowPct:.3,spacingPct:.05,pressureAffectsOpacity:!1,pressureAffectsSize:!0,delay:g(5)},camera:ce.init,current:ue.Brush},layers:dt.init(),hasPressedDown:!1}}(),n=new d.f,r=new d.f,h=new d.f,b=new d.f,p=d.g.create([]),v=Object(s.a)(null),m=new d.i(800,800);let y=_n(),T=xn({canvasOffset:new d.i(t.tool.camera.offsetX,t.tool.camera.offsetY),canvasResolution:m});const _=d.h.create({initialState:t,initialEphemeral:{tool:we()},effectsHandler:e=>h.value.handle(e),forceRender:()=>Object(o.b)(e),update:(e,t,n)=>{const r=gn(T,e,t,n);return h.value.update(r[0]),r}});{function w(){y=_n(),T=xn({canvasOffset:wn(Object(i.a)(v)),canvasResolution:m})}document.addEventListener("resize",w),Object(c.e)(e,()=>{document.removeEventListener("resize",w)})}const x=new pn(_.send);let O=null;const R=Object(c.a)(e,e=>{null===O?function(e){for(const t in Ne){if(!Ne.hasOwnProperty(t))continue;const n=Ne[t];document.body.style.setProperty(t,n(e))}}(e):function(e,t){for(const n in Ne){if(!Ne.hasOwnProperty(n))continue;const r=Ne[n],s=r(e),o=r(t);s!==o&&document.body.style.setProperty(n,o)}}(O,e),O=e}),A=Object(c.b)(e,()=>{const e=Object(i.a)(v);if(null==e)throw"Canvas not found";const t=_.getState();T=xn({canvasOffset:wn(e),canvasResolution:m});{const n=mn.create(e,t,{onStats:e=>{p.push(e)},onWebglContextCreated:e=>{b.set(e)}});if(null===n)throw"Failed to initialize Canvas";h.set(n)}return n.set(Ke(e,{click:x.onClick,release:x.onRelease,move:e=>{},drag:x.onDrag})),r.set(d.c.make(x.onFrame)),()=>{n.value(),r.value(),h.value.dispose()}});function j(e){return"translate("+e.offsetX+"px, "+e.offsetY+"px) "+("rotate("+e.rotateTurns+"turn) ")+("scale("+e.zoomPct+", "+e.zoomPct+")")}return()=>{const e=_.getState();return A(),R(e.theme),Object(l.e)(f.appContainer,a.a,[Object(l.e)(f.wrapper,a.a,[Pe({msgSender:x.tool,tool:e.tool,transientState:{isDetailsExpanded:!0}}),Object(u.a)(v,Object(l.d)(f.canvas,{width:m.x,height:m.y,style:{transform:j(e.tool.camera)}})),Object(l.e)(f.layersViewContainer,a.a,[Object(Me.l)(Tn({camera:e.tool.camera,sender:x.tool.camera})),$e({layers:e.layers,sender:x.layer})])]),Object(l.e)(f.bottomLeft,a.a,Object(Me.h)({content:"Next theme",onClick:x.randomizeTheme})),null])}});{const e=document.getElementById("canvas-root");if(null===e)throw"canvas-root not found";Object(o.c)(On(),e)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return Ue}),n.d(t,"b",function(){return He}),n.d(t,"c",function(){return We}),n.d(t,"d",function(){return Xe}),n.d(t,"e",function(){return Ye});var r=n(6),s=n(10),o=n(42),i=n(29);const c=(e,t,n)=>t.h.h(e,t.t,n);function a(e,t=!0){const n={next:e=>{Object(o.a)(n,e.target,e)}};return r.a.addEventListener(e,Object(s.g)(e=>{n.next(e)}),t),n}const u="ssr"===e.env.IVI_TARGET?void 0:a("abort"),l="ssr"===e.env.IVI_TARGET?void 0:a("activate"),f="ssr"===e.env.IVI_TARGET?void 0:a("ariarequest"),h="ssr"===e.env.IVI_TARGET?void 0:a("beforeactivate"),d="ssr"===e.env.IVI_TARGET?void 0:a("beforecopy"),b="ssr"===e.env.IVI_TARGET?void 0:a("beforecut"),p="ssr"===e.env.IVI_TARGET?void 0:a("beforedeactivate"),v="ssr"===e.env.IVI_TARGET?void 0:a("beforepaste"),g="ssr"===e.env.IVI_TARGET?void 0:a("blur"),m="ssr"===e.env.IVI_TARGET?void 0:a("canplay"),y="ssr"===e.env.IVI_TARGET?void 0:a("canplaythrough"),T="ssr"===e.env.IVI_TARGET?void 0:a("change"),_="ssr"===e.env.IVI_TARGET?void 0:a("click"),w="ssr"===e.env.IVI_TARGET?void 0:a("contextmenu"),x="ssr"===e.env.IVI_TARGET?void 0:a("copy"),O="ssr"===e.env.IVI_TARGET?void 0:a("cuechange"),R="ssr"===e.env.IVI_TARGET?void 0:a("cut"),I="ssr"===e.env.IVI_TARGET?void 0:a("dblclick"),E="ssr"===e.env.IVI_TARGET?void 0:a("deactivate"),A="ssr"===e.env.IVI_TARGET?void 0:a("drag"),j="ssr"===e.env.IVI_TARGET?void 0:a("dragend"),S="ssr"===e.env.IVI_TARGET?void 0:a("dragenter"),L="ssr"===e.env.IVI_TARGET?void 0:a("dragleave"),M="ssr"===e.env.IVI_TARGET?void 0:a("dragover"),k="ssr"===e.env.IVI_TARGET?void 0:a("dragstart"),G="ssr"===e.env.IVI_TARGET?void 0:a("drop"),C="ssr"===e.env.IVI_TARGET?void 0:a("durationchange"),F="ssr"===e.env.IVI_TARGET?void 0:a("emptied"),V="ssr"===e.env.IVI_TARGET?void 0:a("encrypted"),P="ssr"===e.env.IVI_TARGET?void 0:a("ended"),B="ssr"===e.env.IVI_TARGET?void 0:a("error"),z="ssr"===e.env.IVI_TARGET?void 0:a("focus"),D="ssr"===e.env.IVI_TARGET?void 0:a("gotpointercapture"),N="ssr"===e.env.IVI_TARGET?void 0:a("beforeinput"),U="ssr"===e.env.IVI_TARGET?void 0:a("input"),H="ssr"===e.env.IVI_TARGET?void 0:a("invalid"),W="ssr"===e.env.IVI_TARGET?void 0:a("keydown"),X="ssr"===e.env.IVI_TARGET?void 0:a("keypress"),Y="ssr"===e.env.IVI_TARGET?void 0:a("keyup"),q="ssr"===e.env.IVI_TARGET?void 0:a("load"),Z="ssr"===e.env.IVI_TARGET?void 0:a("loadeddata"),$="ssr"===e.env.IVI_TARGET?void 0:a("loadedmetadata"),K="ssr"===e.env.IVI_TARGET?void 0:a("loadstart"),J="ssr"===e.env.IVI_TARGET?void 0:a("lostpointercapture"),Q="ssr"===e.env.IVI_TARGET?void 0:a("mousedown"),ee="ssr"===e.env.IVI_TARGET?void 0:a("mousemove"),te="ssr"===e.env.IVI_TARGET?void 0:a("mouseout"),ne="ssr"===e.env.IVI_TARGET?void 0:a("mouseover"),re="ssr"===e.env.IVI_TARGET?void 0:a("mouseup"),se="ssr"===e.env.IVI_TARGET?void 0:a("paste"),oe="ssr"===e.env.IVI_TARGET?void 0:a("pause"),ie="ssr"===e.env.IVI_TARGET?void 0:a("play"),ce="ssr"===e.env.IVI_TARGET?void 0:a("playing"),ae="ssr"===e.env.IVI_TARGET?void 0:a("pointercancel"),ue="ssr"===e.env.IVI_TARGET?void 0:a("pointerdown"),le="ssr"===e.env.IVI_TARGET?void 0:a("pointermove"),fe="ssr"===e.env.IVI_TARGET?void 0:a("pointerout"),he="ssr"===e.env.IVI_TARGET?void 0:a("pointerover"),de="ssr"===e.env.IVI_TARGET?void 0:a("pointerup"),be="ssr"===e.env.IVI_TARGET?void 0:a("progress"),pe="ssr"===e.env.IVI_TARGET?void 0:a("ratechange"),ve="ssr"===e.env.IVI_TARGET?void 0:a("reset"),ge="ssr"===e.env.IVI_TARGET?void 0:a("scroll"),me="ssr"===e.env.IVI_TARGET?void 0:a("seeked"),ye="ssr"===e.env.IVI_TARGET?void 0:a("seeking"),Te="ssr"===e.env.IVI_TARGET?void 0:a("select"),_e="ssr"===e.env.IVI_TARGET?void 0:a("selectstart"),we="ssr"===e.env.IVI_TARGET?void 0:a("stalled"),xe="ssr"===e.env.IVI_TARGET?void 0:a("submit"),Oe="ssr"===e.env.IVI_TARGET?void 0:a("suspend"),Re="ssr"===e.env.IVI_TARGET?void 0:a("timeupdate"),Ie="ssr"===e.env.IVI_TARGET?void 0:a("touchcancel"),Ee="ssr"===e.env.IVI_TARGET?void 0:a("touchend"),Ae="ssr"===e.env.IVI_TARGET?void 0:a("touchmove"),je="ssr"===e.env.IVI_TARGET?void 0:a("touchstart"),Se="ssr"===e.env.IVI_TARGET?void 0:a("transitioncancel"),Le="ssr"===e.env.IVI_TARGET?void 0:a("transitionend"),Me="ssr"===e.env.IVI_TARGET?void 0:a("transitionrun"),ke="ssr"===e.env.IVI_TARGET?void 0:a("transitionstart"),Ge="ssr"===e.env.IVI_TARGET?void 0:a("unload"),Ce="ssr"===e.env.IVI_TARGET?void 0:a("volumechange"),Fe="ssr"===e.env.IVI_TARGET?void 0:a("waiting"),Ve="ssr"===e.env.IVI_TARGET?void 0:a("wheel"),Pe="ssr"===e.env.IVI_TARGET?void 0:a("touchend",i.a),Be="ssr"===e.env.IVI_TARGET?void 0:a("touchmove",i.a),ze="ssr"===e.env.IVI_TARGET?void 0:a("touchstart",i.a),De="ssr"===e.env.IVI_TARGET?void 0:a("wheel",i.a);function Ne(e){const t={s:e,h:c,f:0},n={s:e,h:c,f:1};return(e,r)=>({d:!0===r?n:t,h:e})}e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET;const Ue="ssr"===e.env.IVI_TARGET?()=>null:Ne(g),He=(e.env.IVI_TARGET,e.env.IVI_TARGET,"ssr"===e.env.IVI_TARGET?()=>null:Ne(T)),We="ssr"===e.env.IVI_TARGET?()=>null:Ne(_),Xe=(e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,"ssr"===e.env.IVI_TARGET?()=>null:Ne(Q)),Ye=(e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,"ssr"===e.env.IVI_TARGET?()=>null:Ne(se));e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET,e.env.IVI_TARGET}).call(this,n(19))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=e=>({v:e})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});const r=()=>{}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(23);var r=n(16);const s=e=>null===e.v?null:Object(r.d)(e.v)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(13),s=n(0),o=n(23);const i=Object(s.a)(e=>{let t;const n=n=>n===r.d?void(t.v=null):(t=function(e,t,n){return void 0!==e&&e!==t&&(e.v=null),t.v=n,t}(t,n.r,e),n.c);return Object(o.e)(e,n),n}),c=(e,t)=>i({r:e,c:t})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});function r(e,t){if(e!==t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;++r){const s=n[r];if(e[s]!==t[s])return!1}}return!0}}]);
//# sourceMappingURL=main-8767ece46c479374e2a5.js.map